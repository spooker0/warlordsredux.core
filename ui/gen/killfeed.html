<!DOCTYPE html><html lang="en"><head><style>@keyframes fadeIn{0%{opacity:0;transform:translateX(calc(-20px*var(--scale))) scale(.98)}60%{opacity:1;transform:translateX(0) scale(1.04)}to{opacity:1;transform:translateX(0) scale(1)}}@keyframes fadeOut{to{opacity:0;transform:translateX(calc(-30px*var(--scale)))}}@keyframes bump{0%,to{transform:translateX(0) scale(1);box-shadow:0 0 0 0 transparent}25%{transform:translateX(0) scale(1.08);box-shadow:0 0 calc(16px*var(--scale)) calc(4px*var(--scale)) rgba(0,225,255,.35)}}@keyframes pointsBump{0%,to{transform:translateX(0) scale(1);text-shadow:0 0 0 transparent}25%{transform:translateX(0) scale(1.1);text-shadow:0 0 calc(14px*var(--scale)) rgba(255,255,255,.75)}}@keyframes ribbonSheen{0%{transform:translateX(-120%);opacity:0}20%{opacity:1}to{transform:translateX(120%);opacity:0}}@keyframes ribbonIn{0%{opacity:0;transform:translateX(-1000px)}to{opacity:1;transform:translateX(0)}}@keyframes ribbonOut{to{opacity:0;transform:translateX(1000px)}}:root{--scale:1;--ribbon-scale:1;--anchor-x:50vw;--anchor-y:15vh;--gap:calc(12px * var(--scale));--points-slot:calc(12ch * var(--scale));--icons-max-width:calc(20vw * var(--scale));--badges-max-width:calc(40vw * var(--scale));--icons-feather:calc(30px * var(--scale))}body{margin:0;padding:0;font-family:Arial,sans-serif;color:#fff;overflow:hidden}.hit-indicator{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;transition:opacity 0s}.hit-indicator.visible{opacity:1;transition:opacity .2s ease}.hit-indicator-image{width:52px;height:52px;object-fit:contain}.stage{position:fixed;left:0;right:0;bottom:var(--anchor-y);height:calc(70px*var(--scale));pointer-events:none;overflow:visible}.kf-left{position:absolute;left:0;bottom:0;width:calc(var(--anchor-x) - var(--gap));display:flex;flex-direction:column;align-items:flex-end;gap:calc(4px*var(--scale));white-space:nowrap;overflow:hidden;font-weight:700;font-size:calc(16px*var(--scale));z-index:2}.kf-badges-viewport,.kf-icons-viewport{position:relative;max-width:var(--icons-max-width);width:var(--icons-max-width);overflow:hidden;mask-image:linear-gradient(to right,transparent 0,#000 var(--icons-feather),#000 100%)}.kf-badges-viewport{max-width:var(--badges-max-width);width:var(--badges-max-width)}.kf-icons-row{display:flex;justify-content:flex-end;flex-wrap:nowrap}.kf-badge,.kf-badges-row,.kf-icons-row{align-items:center;gap:calc(8px*var(--scale))}.kf-badges-row{display:flex;justify-content:flex-end}.kf-badge{border:calc(2px*var(--scale)) solid #00e1ff;border-radius:calc(6px*var(--scale));padding:calc(6px*var(--scale)) calc(10px*var(--scale));background:rgba(0,0,0,.6);display:inline-flex;transform-origin:right center;font-size:calc(16px*var(--scale))}.kf-points{position:absolute;left:calc(var(--anchor-x) + var(--gap));top:0;width:var(--points-slot);text-align:left;font-size:calc(28px*var(--scale));font-weight:900;color:#fff;font-variant-numeric:tabular-nums;transform-origin:left center;z-index:1}.kf-badges-row.unclipped,.kf-icons-row.unclipped,.kf-left.unclipped{overflow:visible}.kf-icon{height:calc(32px*var(--scale));width:auto;flex:0 0 auto;display:block;object-fit:contain;pointer-events:none}.kf-mult{opacity:.9}.enter{animation:fadeIn calc(.3s*var(--scale)) ease forwards}.exit{animation:fadeOut calc(.5s*var(--scale)) ease forwards}.merge{animation:bump calc(260ms*var(--scale)) cubic-bezier(.2,.9,.2,1.2) both}.points-merge{animation:pointsBump calc(280ms*var(--scale)) cubic-bezier(.2,.9,.2,1.2) both}.kf-ribbons{position:fixed;left:0;right:0;top:5vh;display:flex;justify-content:center;align-items:flex-end;gap:calc(10px*var(--ribbon-scale));pointer-events:none;z-index:30}.kf-ribbon{pointer-events:none;position:relative;display:inline-flex;align-items:center;gap:calc(15px*var(--ribbon-scale));padding:calc(18px*var(--ribbon-scale)) calc(28px*var(--ribbon-scale));border-radius:calc(10px*var(--ribbon-scale));font-weight:800;font-size:calc(38px*var(--ribbon-scale));letter-spacing:.25px;transform-origin:center bottom;opacity:1;overflow:hidden}.kf-ribbon::after,.kf-ribbon::before{content:"";position:absolute;pointer-events:none}.kf-ribbon::before{left:6%;right:6%;top:calc(4px*var(--ribbon-scale));height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.65),transparent);opacity:.7}.kf-ribbon::after{inset:0;background:linear-gradient(75deg,transparent 45%,rgba(255,255,255,.2) 50%,transparent 55%);transform:translateX(-120%);animation:ribbonSheen 2s ease-out .35s infinite}.ribbon-level-1{background-color:rgba(119,158,203,.65);border:calc(2px*var(--scale)) solid rgba(119,158,203,.9);box-shadow:0 0 calc(24px*var(--ribbon-scale)) rgba(119,158,203,.35),inset 0 0 0 calc(1px*var(--ribbon-scale)) rgba(119,158,203,.25)}.ribbon-level-2{background-color:rgba(204,117,115,.65);border:calc(2px*var(--scale)) solid rgba(204,117,115,.95);box-shadow:0 0 calc(24px*var(--ribbon-scale)) rgba(204,117,115,.38),inset 0 0 0 calc(1px*var(--ribbon-scale)) rgba(204,117,115,.25)}.ribbon-level-3{background-color:rgba(255,215,0,.65);border:calc(2px*var(--scale)) solid rgba(255,215,0,.95);box-shadow:0 0 calc(24px*var(--ribbon-scale)) rgba(255,215,0,.4),inset 0 0 0 calc(1px*var(--ribbon-scale)) rgba(255,215,0,.3)}.ribbon-icon{width:calc(64px*var(--scale));height:calc(64px*var(--scale));flex:0 0 calc(64px*var(--scale));mask-repeat:no-repeat;mask-position:center;mask-size:contain;filter:drop-shadow(0 0 calc(6px*var(--ribbon-scale)) rgba(255,255,255,.25))}.ribbon-icon-level-1{filter:drop-shadow(0 0 0 rgba(119,158,203,.55));background-color:#779ecb}.ribbon-icon-level-2{filter:drop-shadow(0 0 0 rgba(204,117,115,.55));background-color:#cc7573}.ribbon-icon-level-3{filter:drop-shadow(0 0 0 rgba(255,215,0,.55));background-color:gold}.ribbon-enter{animation:ribbonIn 320ms cubic-bezier(.22,.95,.18,1.05) forwards}.ribbon-exit{animation:ribbonOut calc(260ms*var(--scale)) cubic-bezier(.2,.7,.3,1) forwards}.kf-ribbon[data-index]{animation-delay:calc(40ms*var(--scale)*var(--data-index, 0))}</style></head><body><div class="hit-indicator"><img class="hit-indicator-image" src=""/></div><div class="stage"><div class="kf-left" id="kf-left"><div class="kf-icons-viewport"><div class="kf-icons-row" id="kf-icons-row"></div></div><div class="kf-badges-viewport"><div class="kf-badges-row" id="kf-badges-row"></div></div></div><div class="kf-ribbons" id="kf-ribbons"></div><span class="kf-points" id="kf-points"></span></div><script>document.imageCache={};let KILLFEED_TIMEOUT_MS=1e4,MIN_GAP_MS=500,RIBBON_MIN_SHOW_MS=5e3,SHOW_HIT_INDICATOR=!0;const killfeedQueue=[];let isProcessingQueue=!1,lastAddTimestamp=0,totalPoints=0,displayedPoints=0;function formatPoints(e){try{return(new Intl.NumberFormat).format(e)}catch{return String(e)}}const activeRafHandles=new WeakMap;function animatePoints(e,t,n){const o=Number(t)||0,i=Number(n)||0,a=activeRafHandles.get(e);if(void 0!==a&&cancelAnimationFrame(a),o===i)return displayedPoints=i,e.textContent=i>0?formatPoints(i):"",void activeRafHandles.delete(e);const s=Math.abs(i-o),c=Math.min(500,600+650*Math.log10(s+1)),d=performance.now(),r=requestAnimationFrame(function t(n){const a=n-d,s=Math.min(1,a/c),r=(e=>1-Math.pow(1-e,5))(s),l=Math.round(o+(i-o)*r);if(l!==displayedPoints&&(displayedPoints=l,e.textContent=l>0?formatPoints(l):""),s<1){const n=requestAnimationFrame(t);activeRafHandles.set(e,n)}else activeRafHandles.delete(e)});activeRafHandles.set(e,r)}function addKillfeed(e,t,n,o){SHOW_HIT_INDICATOR&&"#de0808"===n&&hitIndicator(),killfeedQueue.push([e,t,n,o]),processQueue()}function processQueue(){if(isProcessingQueue)return;isProcessingQueue=!0;const e=()=>{if(0===killfeedQueue.length)return void(isProcessingQueue=!1);const t=Date.now(),n=Math.max(0,MIN_GAP_MS-(t-lastAddTimestamp));setTimeout(()=>{const[t,n,o,i]=killfeedQueue.shift();addKillfeedImmediate(t,n,o,i),lastAddTimestamp=Date.now(),e()},n)};e()}const activeAnimations=new WeakMap;function flipReorder(e,t){const n=new Map,o=Array.from(e.children);for(const e of o){n.set(e,e.getBoundingClientRect());const t=activeAnimations.get(e);if(t){try{t.cancel()}catch{}activeAnimations.delete(e)}}e.appendChild(t);const i=Array.from(e.children),a=[];e.classList.add("unclipped");for(const e of i){const t=n.get(e);if(!t)continue;const o=e.getBoundingClientRect(),i=t.left-o.left,s=t.top-o.top;if(0===i&&0===s)continue;const c=e.animate([{transform:`translate(${i}px, ${s}px)`},{transform:"translate(0, 0)"}],{duration:200,easing:"cubic-bezier(0.2, 0.9, 0.2, 1.0)",fill:"both"});activeAnimations.set(e,c);const d=c.finished.catch(()=>{}).then(()=>{try{c.cancel()}catch{}e.style.transform="",activeAnimations.delete(e)});a.push(d)}Promise.allSettled(a).then(()=>{e.classList.remove("unclipped")})}function injectImage(e,t){document.imageCache[t]?e.src=document.imageCache[t]:A3API.RequestTexture(t,64).then(n=>{e.src=n,document.imageCache[t]=n})}function addIconIndependent(e){if(!e)return;const t=document.getElementById("kf-icons-row"),n=document.createElement("img");n.className="kf-icon enter",injectImage(n,e),t.appendChild(n),n._timeout=setTimeout(()=>{n.classList.remove("enter"),n.classList.add("exit"),n.addEventListener("animationend",()=>n.remove(),{once:!0})},KILLFEED_TIMEOUT_MS)}function addKillfeedImmediate(e,t,n,o){A3API.SendAlert("A");const i=document.getElementById("kf-badges-row"),a=document.getElementById("kf-points"),s=(e,t)=>{e&&(e.classList.remove(t),e.offsetWidth,e.classList.add(t))};addIconIndependent(o);let c=Array.from(i.querySelectorAll(".kf-badge")).find(t=>t.dataset.label===e&&t.dataset.customColor===(n||""));const d=0|t;if(c){const t=c.querySelector(".kf-label");let n=c.querySelector(".kf-mult");const o=parseInt(c.dataset.count||"1",10)+1;c.dataset.count=String(o);const r=parseInt(c.dataset.points||"0",10)+d;c.dataset.points=String(r),t&&(t.textContent=e),o>1?(n||(n=document.createElement("span"),n.className="kf-mult",c.appendChild(n)),n.innerHTML=`&times; ${o}`):n&&n.remove(),flipReorder(i,c);const l=totalPoints+d;return animatePoints(a,displayedPoints,l),totalPoints=l,s(c,"merge"),s(a,"points-merge"),clearTimeout(c._timeout),void(c._timeout=setTimeout(()=>removeBadge(c),KILLFEED_TIMEOUT_MS))}const r=document.createElement("span");r.className="kf-badge enter",r.dataset.label=e,r.dataset.count="1",r.dataset.points=String(d),r.dataset.customColor=n||"";const l=document.createElement("span");l.className="kf-label",l.textContent=e,r.appendChild(l),n&&(r.style.borderColor=n,r.style.color=n),i.appendChild(r);const m=totalPoints+d;animatePoints(a,displayedPoints,m),totalPoints=m,s(a,"points-merge"),r._timeout=setTimeout(()=>removeBadge(r),KILLFEED_TIMEOUT_MS)}function renderTotalPoints(e){animatePoints(e,displayedPoints,totalPoints)}function removeBadge(e){const t=document.getElementById("kf-badges-row"),n=document.getElementById("kf-points");e&&e.isConnected&&(e.classList.remove("enter","merge"),e.classList.add("exit"),e.addEventListener("animationend",()=>{e.remove(),0===t.querySelectorAll(".kf-badge").length&&(totalPoints=0,renderTotalPoints(n))},{once:!0}))}const ribbonQueue=[];let ribbonShowing=!1;function addBadge(e,t,n){ribbonQueue.push({badgeName:String(e||""),iconUrl:t||"",badgeLevel:n||""}),processRibbonQueue()}function processRibbonQueue(){if(ribbonShowing)return;const e=ribbonQueue.shift();e&&(ribbonShowing=!0,showRibbon(e).finally(()=>{ribbonShowing=!1,processRibbonQueue()}))}function showRibbon({badgeName:e,iconUrl:t,badgeLevel:n}){return new Promise(o=>{3===n?A3API.SendAlert("C"):A3API.SendAlert("B");const i=document.getElementById("kf-ribbons"),a=document.createElement("div");a.className="kf-ribbon ribbon-enter",1===n?a.classList.add("ribbon-level-1"):2===n?a.classList.add("ribbon-level-2"):a.classList.add("ribbon-level-3");const s=document.createElement("div");if(s.className="ribbon-icon",1===n?s.classList.add("ribbon-icon-level-1"):2===n?s.classList.add("ribbon-icon-level-2"):s.classList.add("ribbon-icon-level-3"),t){const e=document.imageCache[t];e?applyMask(s,e):A3API.RequestTexture(t,64).then(e=>{document.imageCache[t]=e,applyMask(s,e)}).catch(()=>{})}const c=document.createElement("span");c.textContent=e||"",a.appendChild(s),a.appendChild(c),i.replaceChildren(a);const d=setTimeout(()=>{a.classList.remove("ribbon-enter"),a.classList.add("ribbon-exit"),a.addEventListener("animationend",()=>{a.remove(),o()},{once:!0})},RIBBON_MIN_SHOW_MS);a.addEventListener("DOMNodeRemoved",()=>{clearTimeout(d),o()},{once:!0})})}function applyMask(e,t){e.style.maskImage=`url("${t}")`}function setSettings(e,t,n,o,i,a,s,c){document.documentElement.style.setProperty("--scale",e),document.documentElement.style.setProperty("--ribbon-scale",t),document.documentElement.style.setProperty("--anchor-x",`${a}vw`),document.documentElement.style.setProperty("--anchor-y",`${s}vh`),KILLFEED_TIMEOUT_MS=n,MIN_GAP_MS=o,RIBBON_MIN_SHOW_MS=i,SHOW_HIT_INDICATOR=c}const indicator=document.querySelector(".hit-indicator"),indicatorImage=indicator.querySelector(".hit-indicator-image");function hitIndicator(){indicator.classList.add("visible"),clearTimeout(indicator.hideTimeout),indicator.hideTimeout=setTimeout(()=>{indicator.classList.remove("visible")},500)}A3API.RequestTexture("a3\\ui_f\\data\\igui\\cfg\\cursors\\iconcursorsupport_ca.paa",64).then(e=>{indicatorImage.src=e})</script></body></html>