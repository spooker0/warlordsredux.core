<!DOCTYPE html><html lang="en"><head><style>*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif}body,html{height:100%;text-align:center;overflow:hidden}.menu-wrapper{display:inline-block;width:80vw;height:80vh;border-radius:10px;border:2px solid #444;background-color:#2a2a2a;position:absolute;left:10vw;top:10vh}.menu-title{background-color:#222;color:#fff;padding:15px;font-size:24px;font-weight:700;border-bottom:2px solid #444}.close-button{position:absolute;top:10px;right:10px;background-color:rgba(0,0,0,.3);width:40px;height:40px;font-size:30px;color:#fff;display:flex;align-items:center;justify-content:center;border-radius:3px}.close-button:hover{background-color:rgba(0,0,0,.7)}.fps-display{position:fixed;top:10px;left:10px;background-color:#000;color:#fff;padding:5px 10px;border-radius:5px;font-size:14px;z-index:1000}</style><style>.menu-wrapper{--bg-1:#2b2f33;--bg-2:#34383d;--bg-3:#3a3f45;--bg-4:#666e79;--line-1:#1f2327;--line-2:#262b30;--text:#e6e6e6;--text-strong:#ffffff;--text-soft:whitesmoke;--muted:#b7bec6;--accent-blue:#6aa7ff;--accent-red:#ff6a6a;--accent-amber:#ffc04d;--accent-green:#61d095;--scroll-thumb:#555555;--scroll-track:#222222;--btn-gray:#3f454b;--btn-timeout-bg:#462c2c;--btn-timeout-bg-hover:#6a3a3a;--btn-timeout-border:#7a4040;--btn-timeout-text:#ffcccc;--btn-action-bg:#2d3a4b;--btn-action-bg-hover:#456089;--btn-action-border:#4c678f;--btn-action-text:#c6e0ff;--btn-copy-bg:#3a4f3a;--btn-copy-bg-hover:#4f6b4f;--btn-copy-border:#5c7a5c;--btn-copy-text:#d4f8d4;background:var(--bg-1);color:var(--text)}.panel{scrollbar-width:thin;scrollbar-color:var(--scroll-thumb) var(--scroll-track)}.mod-content{font-family:Arial,sans-serif;position:absolute;top:62px;bottom:0;left:0;right:0;display:flex;gap:1rem;overflow:hidden;min-height:0}.menu-title{color:var(--text-strong)}.players-panel{flex:0 1 20rem;display:grid;grid-auto-rows:auto;grid-template-rows:auto 1fr;gap:0;overflow:hidden;min-height:0}.player-details-panel{flex:1 1 35rem;display:none;flex-direction:column;overflow:auto;min-height:0}.chat-panel{flex:1 1 auto;display:grid;grid-template-rows:auto auto 1fr auto;overflow:hidden;min-height:0}.block-title,.panel-subtitle,.panel-title{font-weight:800;padding:.6rem .9rem;letter-spacing:.03em;text-transform:uppercase}.block-title,.panel-subtitle{font-size:.92rem;color:var(--muted)}.block{padding:.4rem}.list{list-style:none;margin:0;padding:0}.player-item,.report-item,.timeout-item{border:1px solid var(--line-2);padding:.6rem .8rem;margin:.2rem 0;background:var(--bg-3)}#chat-current-filter:hover,.chat-msg:hover,.player-item:hover,.timeout-item:hover,button:hover{background:var(--bg-4)}.player-row{display:flex;justify-content:space-between;gap:.8rem}.player-name{font-weight:800}.chat-player,.player-name{color:var(--text-strong)}.chat-text,.player-aliases,.report-reason,.timeout-name{color:var(--muted)}.report-item{text-align:left}.report-from{margin-right:.5em;color:var(--accent-blue)}#player-list{min-height:0;overflow:auto;padding-right:.2rem}#selected-player-header{padding:.8rem .9rem;border-bottom:1px solid var(--line-2);font-size:1.2em}.selected,.selected *,.selected:hover{color:var(--line-1)!important;background-color:var(--text-soft)!important}.label{font-weight:700;color:var(--text-strong)}#player-info,input,select,textarea{font:inherit;background:var(--bg-3);padding:.5rem .65rem;border:0}#player-info{width:100%;min-height:6rem;resize:none;font-family:Consolas,monospace;color:var(--accent-green)}input,select,textarea{color:var(--text)}#timeout-records{max-height:5rem;overflow:auto}.timeout-form{display:flex;flex-direction:column;gap:.6rem}#timeout-minutes{max-width:8rem}#timeout-minutes-slider{width:100%;padding:0}#timeout-reason{width:100%}#chat-current-filter{color:var(--muted);font-weight:700;letter-spacing:.02em;text-align:left;padding:.6rem .9rem;border:1px solid var(--line-2)}.chat-channel,.chat-player{padding:.35rem .5rem;border:1px solid var(--line-2);background:var(--bg-3);font-weight:700;font-size:.9rem}.chat-channel{color:var(--accent-blue)}.chat-channel:hover,.chat-player:hover{background:var(--btn-action-bg-hover)}#chat-log{min-height:0;overflow:auto;border-top:1px solid var(--line-2);border-bottom:1px solid var(--line-2)}#chat-messages{overflow:auto;height:100%}.chat-msg,button{border:1px solid var(--line-2)}.chat-msg{display:grid;grid-template-columns:5rem 5rem auto 1fr auto;align-items:center;background:var(--bg-3);padding:.4rem .5rem;margin:.2rem 0;gap:.6rem}.timeout-end,.timeout-reason,.timeout-uid{font-family:Consolas,monospace;font-weight:700;color:var(--accent-green)}.timeout-reason{text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#btn-timeout,.timeout-clear{color:var(--btn-timeout-text)}.timeout-clear{padding:.2rem .4rem;background-color:var(--btn-timeout-bg);border:1px solid var(--btn-timeout-border)}.timeout-clear:hover{background-color:var(--btn-timeout-bg-hover)}.chat-time{font-family:Consolas,monospace;font-weight:700;color:var(--accent-amber)}.chat-text{text-align:left}.chat-select{width:1.2rem;height:1.2rem}button{font:inherit;color:var(--text);padding:.5rem .75rem}button:active{opacity:.8}#btn-timeout{background:var(--btn-timeout-bg);border-color:var(--btn-timeout-border);width:100%}#btn-timeout:hover{background:var(--btn-timeout-bg-hover)}#btn-clear-reports,#btn-copy{background:var(--btn-copy-bg);border-color:var(--btn-copy-border);color:var(--btn-copy-text)}#btn-clear-reports{width:100%}#btn-clear-reports:hover{background:var(--btn-copy-bg-hover)}#btn-copy{float:right;position:relative;top:-30px;height:30px;font-size:.9rem;flex:1}.btn-row{width:100%;display:flex}#btn-select-all,#btn-select-none{flex:1}#btn-copy-chat,#btn-mod-receipts,#btn-select-all,#btn-select-none{background:var(--btn-copy-bg);border-color:var(--btn-copy-border);color:var(--btn-copy-text)}#btn-copy-chat:hover,#btn-copy:hover,#btn-mod-receipts:hover,#btn-select-all:hover,#btn-select-none:hover{background-color:var(--btn-copy-bg-hover)}#btn-copy-chat{flex:1.5}#btn-mod-receipts{flex:2.5}#btn-deputize,#btn-goto,#btn-mute,#btn-rebalance,#btn-see-afk-log,#btn-see-transfers,#btn-vehicles{background:var(--btn-action-bg);border-color:var(--btn-action-border);color:var(--btn-action-text);width:100%}#btn-deputize:hover,#btn-goto:hover,#btn-mute:hover,#btn-rebalance:hover,#btn-see-afk-log:hover,#btn-see-transfers:hover,#btn-vehicles:hover{background:var(--btn-action-bg-hover)}#btn-deputize{display:none}.row{display:flex;align-items:center;gap:.8rem;margin-bottom:.4rem}.player-reports{display:inline-flex;align-items:center;justify-content:center;width:2em;height:2em;font-size:10pt;border-radius:50%;background-color:var(--accent-red)!important;color:var(--text-soft)!important}.player-reports:empty{background-color:transparent!important;border:0!important}.player-aliases{text-align:left;font-size:8pt}#selected-player-name{color:var(--text-strong)}.timeout-item{padding:2px 16px;margin:.2em 0;font-size:8pt}.timeout-row{display:flex;align-items:center;justify-content:space-between}</style></head><body><div class="menu-wrapper"><div class="menu-title">Moderate</div><div class="mod-content"><div class="players-panel"><div class="panel-title">Players</div><ul class="list panel players" id="player-list"></ul><div class="panel-subtitle">Gulag</div><ul class="list panel timeouts" id="timeout-records"></ul></div><div class="panel player-details-panel"><div id="selected-player-header"><div class="label" id="selected-player-name">Selected Player Name</div></div><div class="block"><textarea disabled="disabled" id="player-info"></textarea> <button id="btn-copy" type="button">Copy to clipboard</button></div><div class="block timeout-form"><div class="block-title">Timeout</div><div class="row"><label class="label" for="timeout-minutes">Minutes</label> <input id="timeout-minutes" name="minutes" max="120" min="1" step="1" type="number" value="15"> <input id="timeout-minutes-slider" name="minutes" max="120" min="1" step="1" type="range" value="15"></div><div class="row"><label class="label" for="timeout-reason">Reason</label> <input id="timeout-reason" name="reason-custom" placeholder="unsportsmanlike conduct"></div><div class="row"><button id="btn-timeout" type="button">Timeout player</button></div></div><div class="block"><div class="block-title">Actions</div><div class="row"><button id="btn-rebalance" type="button">Rebalance player</button></div><div class="row"><button id="btn-vehicles" type="button">Access player vehicles</button></div><div class="row"><button id="btn-goto" type="button">Fast travel to player</button></div><div class="row"><button id="btn-mute" type="button">Toggle player mute</button></div><div class="row"><button id="btn-see-transfers" type="button">View player transfers</button></div><div class="row"><button id="btn-see-afk-log" type="button">View player AFK log</button></div><div class="row"><button id="btn-deputize" type="button">Grant spectate permission</button></div></div><div class="block"><div class="block-title">Reports</div><ul class="list reports" id="player-reports"></ul><div class="row"><button id="btn-clear-reports" type="button">Clear reports</button></div></div></div><div class="chat-panel"><div class="panel-title">Chat</div><div id="chat-current-filter">Showing all messages</div><div id="chat-log"><ul class="list panel" id="chat-messages"></ul></div><div class="btn-row"><button id="btn-select-all" type="button">Select all</button> <button id="btn-select-none" type="button">Select none</button> <button id="btn-copy-chat" type="button">Copy chat (0)</button> <button id="btn-mod-receipts" type="button">Copy mod receipts (0)</button></div></div></div></div><script>var CryptoJS=CryptoJS||function(t){var n={},i=n.lib={},r=function(){},e=i.Base={extend:function(t){r.prototype=this;var n=new r;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=e.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var n=this.words,i=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var e=0;e<t;e++)n[r+e>>>2]|=(i[e>>>2]>>>24-e%4*8&255)<<24-(r+e)%4*8;else if(65535<i.length)for(e=0;e<t;e+=4)n[r+e>>>2]=i[e>>>2];else n.push.apply(n,i);return this.sigBytes+=t,this},clamp:function(){var n=this.words,i=this.sigBytes;n[i>>>2]&=4294967295<<32-i%4*8,n.length=t.ceil(i/4)},clone:function(){var t=e.clone.call(this);return t.words=this.words.slice(0),t},random:function(n){for(var i=[],r=0;r<n;r+=4)i.push(4294967296*t.random()|0);return new s.init(i,n)}}),o=n.enc={},a=o.Hex={stringify:function(t){var n=t.words;t=t.sigBytes;for(var i=[],r=0;r<t;r++){var e=n[r>>>2]>>>24-r%4*8&255;i.push((e>>>4).toString(16)),i.push((15&e).toString(16))}return i.join("")},parse:function(t){for(var n=t.length,i=[],r=0;r<n;r+=2)i[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(i,n/2)}},c=o.Latin1={stringify:function(t){var n=t.words;t=t.sigBytes;for(var i=[],r=0;r<t;r++)i.push(String.fromCharCode(n[r>>>2]>>>24-r%4*8&255));return i.join("")},parse:function(t){for(var n=t.length,i=[],r=0;r<n;r++)i[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(i,n)}},u=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var i=this._data,r=i.words,e=i.sigBytes,o=this.blockSize,a=e/(4*o);if(n=(a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,e=t.min(4*n,e),n){for(var c=0;c<n;c+=o)this._doProcessBlock(r,c);c=r.splice(0,n),i.sigBytes-=e}return new s.init(c,e)},clone:function(){var t=e.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=h.extend({cfg:e.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,i){return new t.init(i).finalize(n)}},_createHmacHelper:function(t){return function(n,i){return new f.HMAC.init(t,i).finalize(n)}}});var f=n.algo={};return n}(Math);!function(t){function n(t,n,i,r,e,s,o){return((t=t+(n&i|~n&r)+e+o)<<s|t>>>32-s)+n}function i(t,n,i,r,e,s,o){return((t=t+(n&r|i&~r)+e+o)<<s|t>>>32-s)+n}function r(t,n,i,r,e,s,o){return((t=t+(n^i^r)+e+o)<<s|t>>>32-s)+n}function e(t,n,i,r,e,s,o){return((t=t+(i^(n|~r))+e+o)<<s|t>>>32-s)+n}for(var s=CryptoJS,o=(c=s.lib).WordArray,a=c.Hasher,c=s.algo,u=[],h=0;64>h;h++)u[h]=4294967296*t.abs(t.sin(h+1))|0;c=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,s){for(var o=0;16>o;o++){var a=t[c=s+o];t[c]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}o=this._hash.words;var c=t[s+0],h=(a=t[s+1],t[s+2]),f=t[s+3],l=t[s+4],p=t[s+5],d=t[s+6],g=t[s+7],y=t[s+8],_=t[s+9],v=t[s+10],w=t[s+11],B=t[s+12],m=t[s+13],S=t[s+14],x=t[s+15],H=n(H=o[0],M=o[1],C=o[2],z=o[3],c,7,u[0]),z=n(z,H,M,C,a,12,u[1]),C=n(C,z,H,M,h,17,u[2]),M=n(M,C,z,H,f,22,u[3]);H=n(H,M,C,z,l,7,u[4]),z=n(z,H,M,C,p,12,u[5]),C=n(C,z,H,M,d,17,u[6]),M=n(M,C,z,H,g,22,u[7]),H=n(H,M,C,z,y,7,u[8]),z=n(z,H,M,C,_,12,u[9]),C=n(C,z,H,M,v,17,u[10]),M=n(M,C,z,H,w,22,u[11]),H=n(H,M,C,z,B,7,u[12]),z=n(z,H,M,C,m,12,u[13]),C=n(C,z,H,M,S,17,u[14]),H=i(H,M=n(M,C,z,H,x,22,u[15]),C,z,a,5,u[16]),z=i(z,H,M,C,d,9,u[17]),C=i(C,z,H,M,w,14,u[18]),M=i(M,C,z,H,c,20,u[19]),H=i(H,M,C,z,p,5,u[20]),z=i(z,H,M,C,v,9,u[21]),C=i(C,z,H,M,x,14,u[22]),M=i(M,C,z,H,l,20,u[23]),H=i(H,M,C,z,_,5,u[24]),z=i(z,H,M,C,S,9,u[25]),C=i(C,z,H,M,f,14,u[26]),M=i(M,C,z,H,y,20,u[27]),H=i(H,M,C,z,m,5,u[28]),z=i(z,H,M,C,h,9,u[29]),C=i(C,z,H,M,g,14,u[30]),H=r(H,M=i(M,C,z,H,B,20,u[31]),C,z,p,4,u[32]),z=r(z,H,M,C,y,11,u[33]),C=r(C,z,H,M,w,16,u[34]),M=r(M,C,z,H,S,23,u[35]),H=r(H,M,C,z,a,4,u[36]),z=r(z,H,M,C,l,11,u[37]),C=r(C,z,H,M,g,16,u[38]),M=r(M,C,z,H,v,23,u[39]),H=r(H,M,C,z,m,4,u[40]),z=r(z,H,M,C,c,11,u[41]),C=r(C,z,H,M,f,16,u[42]),M=r(M,C,z,H,d,23,u[43]),H=r(H,M,C,z,_,4,u[44]),z=r(z,H,M,C,B,11,u[45]),C=r(C,z,H,M,x,16,u[46]),H=e(H,M=r(M,C,z,H,h,23,u[47]),C,z,c,6,u[48]),z=e(z,H,M,C,g,10,u[49]),C=e(C,z,H,M,S,15,u[50]),M=e(M,C,z,H,p,21,u[51]),H=e(H,M,C,z,B,6,u[52]),z=e(z,H,M,C,f,10,u[53]),C=e(C,z,H,M,v,15,u[54]),M=e(M,C,z,H,a,21,u[55]),H=e(H,M,C,z,y,6,u[56]),z=e(z,H,M,C,x,10,u[57]),C=e(C,z,H,M,d,15,u[58]),M=e(M,C,z,H,m,21,u[59]),H=e(H,M,C,z,l,6,u[60]),z=e(z,H,M,C,w,10,u[61]),C=e(C,z,H,M,h,15,u[62]),M=e(M,C,z,H,_,21,u[63]),o[0]=o[0]+H|0,o[1]=o[1]+M|0,o[2]=o[2]+C|0,o[3]=o[3]+z|0},_doFinalize:function(){var n=this._data,i=n.words,r=8*this._nDataBytes,e=8*n.sigBytes;i[e>>>5]|=128<<24-e%32;var s=t.floor(r/4294967296);for(i[15+(e+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),i[14+(e+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n.sigBytes=4*(i.length+1),this._process(),i=(n=this._hash).words,r=0;4>r;r++)e=i[r],i[r]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return n},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(c),s.HmacMD5=a._createHmacHelper(c)}(Math)</script><script>function patchList(e,t,{key:n,create:c,update:a,itemSelector:o=":scope > *",keepSelection:l=!1,selectedClass:s="selected"}){if(!e)return;let d=null;if(l){const t=e.querySelector(`.${s}`);t&&(d=t.dataset.uid||t.dataset.key||null)}const r=new Map;e.querySelectorAll(o).forEach(e=>{const t=e.dataset.uid||e.dataset.key;t&&r.set(t,e)});const i=document.createDocumentFragment();for(const e of t){const t=n(e);let o=r.get(t);o?(a(o,e),r.delete(t)):(o=c(e),o.dataset.uid||o.dataset.key||(o.dataset.uid=t)),i.appendChild(o)}for(const e of r.values())e.remove();if(e.replaceChildren(i),l&&d){const t=e.querySelector(`[data-uid="${d}"], [data-key="${d}"]`);t&&t.classList.add(s)}}function createTimedOutListItem(e,t){const n=document.createElement("li");n.className="timeout-item",n.dataset.uid=e.uid;const c=document.createElement("div");c.className="timeout-row";const a=document.createElement("span");a.className="timeout-uid",a.textContent=e.uid;const o=document.createElement("span");o.className="timeout-end",o.textContent=e.end;const l=document.createElement("button");l.className="timeout-clear",l.textContent="Clear",l.addEventListener("click",()=>{A3API.SendAlert(`["clearTimeout", "${e.uid}"]`)});const s=document.createElement("div");return s.className="timeout-reason",s.textContent=`Reason: ${e.reason}`,c.appendChild(a),c.appendChild(o),c.appendChild(l),n.appendChild(c),n.appendChild(s),n}function updateTimedOutListItem(e,t){e.dataset.uid=t.uid;const n=e.querySelector(".timeout-uid");n&&n.textContent!==t.uid&&(n.textContent=t.uid);const c=e.querySelector(".timeout-end");c&&c.textContent!==t.end&&(c.textContent=t.end);const a=e.querySelector(".timeout-reason");a&&a.textContent!==`Reason: ${t.reason}`&&(a.textContent=`Reason: ${t.reason}`)}function updateTimeouts(e){e=JSON.parse(e||"[]");const t=document.getElementById("timeout-records");if(!t)return;const n=e.map(([e,t,n])=>({uid:e,end:t,reason:n}));patchList(t,n,{key:e=>e.uid,create:e=>createTimedOutListItem(e,t),update:updateTimedOutListItem,itemSelector:".timeout-item",keepSelection:!0,selectedClass:"selected"})}function createPlayerListItem(e,t){const n=document.createElement("li");n.className="player-item",n.dataset.uid=e.uid;const c=document.createElement("div");c.className="player-row";const a=document.createElement("span");a.className="player-name",a.textContent=e.name;const o=document.createElement("div");o.className="player-reports",o.textContent=e.reports?`${e.reports}`:"",c.appendChild(a),c.appendChild(o);const l=document.createElement("div");return l.className="player-aliases",l.textContent=e.aliases.length?`AKA: ${e.aliases.join(", ")}`:"",n.appendChild(c),n.appendChild(l),n.addEventListener("click",()=>selectPlayer(e,t)),n}function updatePlayerListItem(e,t){e.dataset.id=String(t.id??""),e.querySelector(".player-name").textContent=t.name,e.querySelector(".player-reports").textContent=t.reports?`${t.reports}`:"",e.querySelector(".player-aliases").textContent=t.aliases.length?`AKA: ${t.aliases.join(", ")}`:""}function updatePlayers(e){e=JSON.parse(e||"[]");const t=document.getElementById("player-list"),n=e.map(e=>({uid:e[0],name:e[1],aliases:e[2],reports:e[3]}));patchList(t,n,{key:e=>e.uid,create:e=>createPlayerListItem(e,t),update:updatePlayerListItem,itemSelector:".player-item",keepSelection:!0,selectedClass:"selected",stickToBottom:!1})}function selectPlayer(e,t){const n=t.querySelector(".player-item.selected");n&&n.classList.remove("selected");const c=t.querySelector(`.player-item[data-uid="${e.uid}"]`);c&&c.classList.add("selected"),A3API.SendAlert(`["select", "${e.uid}"]`)}function updatePlayerInfo(e){const t=(e=JSON.parse(e||"[]"))[0]||"";document.selectedPlayer=t;const n=e[1]||"";document.selectedPlayerName=n;const c=e[2]||"";document.getElementById("selected-player-name").textContent=n;const a=document.getElementById("player-info"),o=`[NAME] ${n}\n[BEID] ${uidToBeGuid(t)}\n[GUID] ${t}\n[TIME] ${c}`;a.value=o;const l=document.getElementById("player-reports");l.innerHTML="";for(const[t,n]of e[3]){const e=document.createElement("li");e.className="report-item",e.innerHTML=`<span class="report-from">By: ${t}</span> <span class="report-reason">${n}</span>`,l.appendChild(e)}changeButtons(),document.querySelector(".player-details-panel").style.display="flex"}function makeChatUid(e,t,n,c){return`${e}||${t}||${n}||${c}`}function createChatMsgItem(e){const{timestamp:t,channel:n,player:c,text:a,uid:o}=e,l=document.createElement("li");l.className="chat-msg",l.dataset.uid=o,l.dataset.channel=n,l.dataset.player=c;const s=document.createElement("span");s.className="chat-time",s.textContent=t;const d=document.createElement("span");d.className="chat-channel",d.dataset.channel=n,d.textContent=n,d.addEventListener("click",()=>filterChatByChannel(n));const r=document.createElement("span");r.className="chat-player",r.dataset.player=c,r.textContent=c,r.addEventListener("click",()=>filterChatByPlayer(c)),r.style.visibility=c?"visible":"hidden";const i=document.createElement("span");i.className="chat-text",i.textContent=a;const u=document.createElement("input");return u.type="checkbox",u.className="chat-select",u.addEventListener("click",e=>{const t=document.getElementById("btn-copy-chat"),n=document.querySelectorAll(".chat-select:checked").length;t.style.fontWeight=n>0?"bold":"normal",t.textContent=`Copy chat (${n})`}),l.append(s,d,r,i,u),l.addEventListener("click",e=>{e.target!==u&&(u.checked=!u.checked),u.dispatchEvent(new Event("click"))}),l}function updateChatMsgItem(e,t){const{timestamp:n,channel:c,player:a,text:o}=t;e.dataset.channel=c,e.dataset.player=a;const l=e.querySelector(".chat-time");l&&l.textContent!==String(n)&&(l.textContent=String(n));const s=e.querySelector(".chat-channel");s&&(s.dataset.channel!==c&&(s.dataset.channel=c),s.textContent!==c&&(s.textContent=c));const d=e.querySelector(".chat-player");d&&(d.dataset.player!==a&&(d.dataset.player=a),d.textContent!==a&&(d.textContent=a));const r=e.querySelector(".chat-text");r&&r.textContent!==o&&(r.textContent=o)}function updateChat(e){e=JSON.parse(e||"[]");const t=document.getElementById("chat-messages");t&&patchList(t,e.map(e=>{const t=e[0],n=e[1],c=e[2],a=e[3];return{timestamp:t,channel:n,player:c,text:a,uid:makeChatUid(t,n,c,a)}}),{key:e=>e.uid,create:createChatMsgItem,update:updateChatMsgItem,itemSelector:".chat-msg",keepSelection:!1})}function resetChatFilter(){const e=document.getElementById("chat-messages");e&&e.querySelectorAll(".chat-msg").forEach(e=>{e.style.display=""})}function filterChatByChannel(e){const t=document.getElementById("chat-messages");t&&(t.querySelectorAll(".chat-msg").forEach(t=>{t.style.display=t.dataset.channel===e?"":"none"}),document.getElementById("chat-current-filter").textContent=`Clear filter: Channel ${e}`)}function filterChatByPlayer(e){const t=document.getElementById("chat-messages");t&&(t.querySelectorAll(".chat-msg").forEach(t=>{t.style.display=t.dataset.player===e?"":"none"}),document.getElementById("chat-current-filter").textContent=`Clear filter: Player ${e}`)}function updateModReceipts(e){document.modReceipts=e;const t=(e.match(/\[NAME\]/g)||[]).length,n=document.getElementById("btn-mod-receipts");n.textContent=`Copy mod receipts (${t})`,n.style.fontWeight=t>0?"bold":"normal"}const currentFilterEl=document.getElementById("chat-current-filter");currentFilterEl.addEventListener("click",()=>{currentFilterEl.textContent="Showing all messages",resetChatFilter()});const clearReportBtn=document.getElementById("btn-clear-reports");clearReportBtn.addEventListener("click",()=>{const e=document.selectedPlayer;A3API.SendAlert(`["clearReports", "${e}"]`)});const timeoutButton=document.getElementById("btn-timeout"),timeoutSliderEl=document.getElementById("timeout-minutes-slider");timeoutSliderEl.addEventListener("input",()=>{timeoutDurationEl.value=timeoutSliderEl.value,timeoutDurationEl.dispatchEvent(new Event("change"))});const timeoutDurationEl=document.getElementById("timeout-minutes");timeoutDurationEl.addEventListener("change",()=>{let e=timeoutDurationEl.value||15;e>120&&!document.isAdmin&&(timeoutDurationEl.value=120,e=120),timeoutButton.textContent=`Timeout ${document.selectedPlayerName} for ${e} minutes`,timeoutSliderEl.value=e}),timeoutButton.addEventListener("click",()=>{const e=document.selectedPlayer,t=timeoutDurationEl.value||15,n=document.getElementById("timeout-reason").value||"unsportsmanlike conduct",c=`${document.getElementById("player-info").value}\n[TIMEOUT] ${t} minutes\n[REASON] ${n}\n\n`;A3API.SendAlert(`["timeout", "${e}", ${t}, "${btoa(n)}", "${btoa(c)}"]`)});const balanceButton=document.getElementById("btn-rebalance");balanceButton.addEventListener("click",()=>{A3API.SendAlert(`["rebalance", "${document.selectedPlayer}"]`)});const vehiclesButton=document.getElementById("btn-vehicles");vehiclesButton.addEventListener("click",()=>{A3API.SendAlert(`["accessVehicles", "${document.selectedPlayer}"]`)});const gotoButton=document.getElementById("btn-goto");gotoButton.addEventListener("click",()=>{A3API.SendAlert(`["gotoPlayer", "${document.selectedPlayer}"]`)});const muteButton=document.getElementById("btn-mute");muteButton.addEventListener("click",()=>{A3API.SendAlert(`["mutePlayer", "${document.selectedPlayer}"]`)});const seeTransfersButton=document.getElementById("btn-see-transfers");seeTransfersButton.addEventListener("click",()=>{A3API.SendAlert(`["seeTransfers", "${document.selectedPlayer}"]`)});const seeAFKLogButton=document.getElementById("btn-see-afk-log");seeAFKLogButton.addEventListener("click",()=>{A3API.SendAlert(`["seeAFKLog", "${document.selectedPlayer}"]`)});const deputizeButton=document.getElementById("btn-deputize");function changeButtons(){document.selectedPlayer;const e=document.selectedPlayerName;timeoutButton.textContent=`Timeout ${e} for ${timeoutDurationEl.value||15} minutes`,balanceButton.textContent=`Rebalance ${e}`,document.isAdmin?deputizeButton.style.display="block":deputizeButton.style.display="none"}deputizeButton.addEventListener("click",()=>{A3API.SendAlert(`["deputize", "${document.selectedPlayer}"]`)}),changeButtons();const selectAllBtn=document.getElementById("btn-select-all");selectAllBtn.addEventListener("click",()=>{const e=document.getElementById("chat-messages");e&&e.querySelectorAll(".chat-select").forEach(e=>{null!==e.offsetParent&&(e.checked=!0,e.dispatchEvent(new Event("click")))})});const deselectAllBtn=document.getElementById("btn-select-none");deselectAllBtn.addEventListener("click",()=>{const e=document.getElementById("chat-messages");e&&e.querySelectorAll(".chat-select").forEach(e=>{e.checked=!1,e.dispatchEvent(new Event("click"))})});const copyChatBtn=document.getElementById("btn-copy-chat");copyChatBtn.addEventListener("click",()=>{const e=document.getElementById("chat-messages");if(!e)return;let t="";const n=e.querySelectorAll(".chat-msg");n.forEach(e=>{const n=e.querySelector(".chat-select");if(n&&n.checked){const n=e.querySelector(".chat-player")?.textContent||"",c=e.querySelector(".chat-text")?.textContent||"";t+=(t?"\n":"")+(n?`${n}: ${c}`:c)}}),document.copyData=t,document.execCommand("copy"),n.forEach(e=>{const t=e.querySelector(".chat-select");t&&t.checked&&(t.checked=!1)}),copyChatBtn.style.fontWeight="normal",copyChatBtn.textContent="Copy chat (0)"});const modReceiptsBtn=document.getElementById("btn-mod-receipts");modReceiptsBtn.addEventListener("click",()=>{document.copyData=document.modReceipts||"",document.execCommand("copy"),A3API.SendAlert('["modReceipts"]')}),document.addEventListener("copy",e=>{document.copyData&&(e.clipboardData.setData("text/plain",document.copyData),document.copyData="",e.preventDefault())});const copyInfoBtn=document.getElementById("btn-copy");function uidToBeGuid(e){if(!e)return"";let t=BigInt(e),n="BE";for(let e=0;e<8;e++){const e=Number(0xFFn&t);t>>=8n,n+=String.fromCharCode(e)}return CryptoJS.MD5(CryptoJS.enc.Latin1.parse(n)).toString()}copyInfoBtn.addEventListener("click",()=>{const e=document.getElementById("player-info");document.copyData=e.value,document.execCommand("copy")})</script><script>document.addEventListener("wheel",function(e){const o=document.elementFromPoint(e.clientX,e.clientY);o&&o.closest(".panel")&&(o.closest(".panel").scrollTop+=e.deltaY,e.preventDefault())},{passive:!1});const wrapper=document.querySelector(".menu-wrapper"),header=document.querySelector(".menu-title"),closeButton=document.createElement("div");closeButton.className="close-button",closeButton.innerHTML="&times;",wrapper.appendChild(closeButton),closeButton.addEventListener("mousedown",function(){A3API.SendAlert("exit")});const pos={x1:0,y1:0,x2:0,y2:0},onMouseMove=e=>{e.preventDefault();const{clientX:o,clientY:t}=e;pos.x1=pos.x2-o,pos.y1=pos.y2-t,pos.x2=o,pos.y2=t,wrapper.style.top=wrapper.offsetTop-pos.y1+"px",wrapper.style.left=wrapper.offsetLeft-pos.x1+"px"},onMouseUp=()=>{document.removeEventListener("mouseup",onMouseUp),document.removeEventListener("mousemove",onMouseMove)},onMouseDown=e=>{e.preventDefault(),pos.x2=e.clientX,pos.y2=e.clientY,document.addEventListener("mouseup",onMouseUp),document.addEventListener("mousemove",onMouseMove)};header.addEventListener("mousedown",onMouseDown);const fpsDisplay=document.createElement("div");fpsDisplay.className="fps-display",document.body.appendChild(fpsDisplay);let frameTime=0,frameCount=0,lastLoop=performance.now();const fpsLoop=()=>{const e=performance.now();frameTime+=(e-lastLoop-frameTime)/20,lastLoop=e,frameCount++,requestAnimationFrame(fpsLoop)};setInterval(()=>{fpsDisplay.textContent=frameCount>60?`MENU FPS: ${(1e3/frameTime).toFixed(2)}`:"MENU FPS: -"},100),fpsLoop()</script></body></html>