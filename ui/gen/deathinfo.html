<!DOCTYPE html><html lang="en"><head><style>:root{--accent:#ff3b3b;--hud-text:#14cb00;--bar-bg-solid:rgba(8, 10, 14, 0.4);--bar-bg-mid:rgba(8, 10, 14, 0.4);--bar-bg-transparent:rgba(8, 10, 14, 0);--text:#ffffff;--divider:rgba(255, 255, 255, 0.4);--text-size:35px;--badge-size:128px;--badge-gap:30px}*{box-sizing:border-box}body,html{margin:0;padding:0;height:100%;overflow:hidden;font-family:Consolas,monospace;color:var(--text);text-transform:uppercase;font-size:var(--text-size);line-height:1;font-weight:900;opacity:.96;text-align:center;z-index:10}.death-strip{position:absolute;top:0;left:0;width:100%;height:20vh;display:grid;grid-template-columns:1fr 1fr 1fr;gap:0}.death-strip::after,.death-strip::before{content:"";position:absolute;top:10%;bottom:10%;width:1px;background:var(--divider)}.death-strip::before{left:33.3333%}.death-strip::after{left:66.6667%}.left-panel,.panel{display:grid;align-content:center}.panel{position:relative;padding:14px 20px;justify-items:center}.left-panel{grid-template-columns:2fr 3fr;grid-template-rows:1fr 2fr 1fr;row-gap:.25em;align-items:start;justify-items:stretch;padding:0 .5em;height:20vh}.health-text,.killed-by-name,.killed-by-title,.ratio-text{margin:0;padding:0;line-height:1}.killed-by-name,.killed-by-title{grid-column:1/-1;grid-row:1;text-align:center;align-self:end}.killed-by-name{grid-row:2;font-size:calc(var(--text-size)*1.5);font-weight:900;align-self:center;white-space:nowrap}.health-text,.ratio-text{grid-column:1;grid-row:3;justify-self:start;align-self:start}.ratio-text{grid-column:2;justify-self:end}.center-panel{position:relative;height:20vh;background-color:var(--bar-bg-solid)}.badge,.badge-icon-mask{position:absolute;left:50%;top:10%;transform:translate(-50%);width:var(--badge-size);height:var(--badge-size)}.badge-icon-mask{top:50%;transform:translate(-50%,-50%);display:block;--icon:none;background-color:var(--badge-color,#fff);mask-image:var(--icon);mask-repeat:no-repeat;mask-position:center;mask-size:contain}.badge-text{position:absolute;left:50%;top:75%;transform:translateX(-50%);white-space:nowrap}.badge-level-1{--badge-color:#779ECB}.badge-level-2{--badge-color:#cc7573}.badge-level-3{--badge-color:#FFD700}.right-panel{display:grid;grid-auto-rows:auto;row-gap:4px;justify-items:center;align-items:start;align-content:start;text-align:center;margin:0;padding:0}.killer-icon{width:var(--badge-size);height:var(--badge-size)}.killer-icon-mask{position:absolute;left:50%;top:50%;width:300px;height:300px;transform:translate(-50%,-40%);display:block;--icon:none;background-color:#fff;mask-image:var(--icon);mask-repeat:no-repeat;mask-position:center;mask-size:contain}.killer-text{margin:0;padding:.5em;align-self:start}.death-display{position:absolute;left:50vw;top:50vh;transform:translate(-50%,-50%);text-align:center;width:100vw}.display-title,.respawn-timer{color:var(--accent);font-size:calc(var(--text-size)*3);text-shadow:0 6px 28px rgba(0,0,0,.45)}.respawn-timer{margin-top:8px;font-size:calc(var(--text-size)*1.25);color:var(--text)}.hit-projectiles{position:fixed;left:1vw;top:28vh;width:30vw;height:50vh;font-size:calc(var(--text-size)*.5);color:var(--hud-text);text-shadow:-1px -1px 0#000,1px -1px 0#000,-1px 1px 0#000,1px 1px 0#000;text-align:left;display:flex;flex-direction:column;gap:8px;padding:8px;align-items:center}.hit-projectiles-list{display:grid;grid-template-columns:auto 1fr;column-gap:30px;align-items:start}.hit-header{grid-column:1/-1;margin-bottom:1.1em;text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:.6em}.hit-by,.hit-times{display:block;white-space:pre-line}.hit-times{text-align:right}.hit-by{text-align:left}.hitviz-wrap{width:240px;height:384px;position:fixed;left:75vw;top:32vh}#hitviz{width:100%;height:100%;background:0 0;image-rendering:pixelated}.actions-bar{position:fixed;left:50%;bottom:20vh;width:70vw;transform:translateX(-50%);z-index:20;text-shadow:-1px -1px 0#000,1px -1px 0#000,-1px 1px 0#000,1px 1px 0#000}.actions-track{display:flex;gap:1em;align-items:center;justify-content:center}.action{position:relative;flex:1 1 0;height:2em;font-size:calc(var(--text-size)*.8);color:var(--hud-text);border:4px solid transparent;text-align:center;overflow:hidden;white-space:nowrap}.action.is-selected{border-color:var(--hud-text)}.action::before{content:"";position:absolute;inset:0;width:calc(var(--hold-progress,0)*100%);background:var(--hud-text);transition:width 0s linear}.action,.action::after{display:flex;align-items:center;justify-content:center}.action::after{content:attr(data-label);position:absolute;inset:0;color:#fff;clip-path:inset(0 calc((1 - var(--hold-progress,0))*100%)0 0);text-shadow:none}</style></head><body><div class="death-strip"><div class="panel left-panel"><div class="killed-by-title">KILLER</div><div class="killed-by-name">Enemy</div><div class="health-text">HEALTH 100%</div><div class="ratio-text"><span class="ratio-you">YOU 0</span> - <span class="ratio-them">0 THEM</span></div></div><div class="panel center-panel"><div class="badge"><div class="badge-icon-mask"></div></div><div class="badge-text"></div></div><div class="panel right-panel"><div class="killer-text"></div><div class="killer-icon"><div class="killer-icon-mask"></div></div></div></div><div class="hit-projectiles"><div class="hit-projectiles-list"><div class="hit-times"></div><div class="hit-by"></div></div></div><div class="death-display"><div class="display-title">YOU ARE DOWN</div><div class="respawn-timer">Respawning in 30...</div></div><div class="hitviz-wrap"><canvas height="480" id="hitviz" width="300"></canvas></div><div class="actions-bar"><div class="actions-track" id="actionsTrack"><div class="action" data-action-id="0">HOLD ON</div><div class="action" data-action-id="1">LOADOUTS</div><div class="action" data-action-id="2">VEHICLES</div><div class="action" data-action-id="3">BADGES</div><div class="action" data-action-id="4">REPORT</div><div class="action" data-action-id="5">SETTINGS</div><div class="action" data-action-id="6">SQUADS</div></div></div><script>function sideToColorHex(e){switch(e){case"WEST":return"#1087ff";case"EAST":return"#fe0000";case"GUER":return"#00fe00";default:return"#FFFFFF"}}function sideToColorRGB(e,t=1){switch(e){case"WEST":return`rgba(16, 135, 255, ${t})`;case"EAST":return`rgba(254, 0, 0, ${t})`;case"GUER":return`rgba(0, 254, 0, ${t})`;default:return`rgba(255, 255, 255, ${t})`}}function updateData(e){e=JSON.parse(e||"[]");const[t,o,r,n,a,l,s,d,c,i,h,u]=e;document.querySelector(".health-text").textContent=`HEALTH ${t}%`,document.querySelector(".ratio-you").textContent=`YOU ${n}`,document.querySelector(".ratio-them").textContent=`${a} THEM`,document.querySelector(".killed-by-name").textContent=`${l}`,sideToColorHex(s),document.querySelector(".death-strip").style.backgroundColor=sideToColorRGB(s,.8),document.querySelector(".killer-text").textContent=o;const m=document.querySelector(".killer-icon-mask");r?(m.style.display="",A3API.RequestTexture(r,512).then(e=>{m.style.setProperty("--icon",`url(${e})`)})):m.style.display="none";const g=document.querySelector(".badge-text"),f=document.querySelector(".badge");g.textContent=d;let p="#ffffff";1===c?(f.className="badge badge-level-1",p="#779ECB"):2===c?(f.className="badge badge-level-2",p="#cc7573"):3===c&&(f.className="badge badge-level-3",p="#FFD700");const y=document.querySelector(".badge-icon-mask");i?A3API.RequestTexture(i.replace(/\\\\/g,"\\"),256).then(e=>{y.style.setProperty("--icon",`url(${e})`),y.style.setProperty("--badge-color",p)}):A3API.RequestTexture("a3\\missions_f_epa\\data\\img\\orbat\\i_aaf_ca.paa",256).then(e=>{y.style.setProperty("--icon",`url(${e})`),y.style.setProperty("--badge-color",p)}),updateHitpoints(h),updateHitProjectiles(u)}function updateHitProjectiles(e){if(document.querySelector(".hit-projectiles"),!e||0===e.length)return;const t=document.querySelector(".hit-times"),o=document.querySelector(".hit-by");t.innerHTML='<div class="hit-header">TIME</div>',o.innerHTML='<div class="hit-header">PROJECTILE</div>',e.forEach(e=>{t.innerHTML+=`${e[0]}<br/>`,o.innerHTML+=`${e[1]}<br/>`})}function updateRespawnTimer(e){document.querySelector(".respawn-timer").textContent=e?`BLEED OUT IN ${String(e).padStart(4,"0")}...`:"WAITING TO RESPAWN..."}const HITPOINT_ORDER=["hitface","hitneck","hithead","hitpelvis","hitabdomen","hitdiaphragm","hitchest","hitbody","hitarms","hithands","hitlegs"],LINE_WIDTH=1;function norm01(e){return e=Number.isFinite(e)?e:0,Math.max(0,Math.min(1,e))}function damageColor(e){e=Math.max(0,Math.min(1,e));const t=Math.pow(e,1.5);let o,r,n;if(t<.5){const e=t/.5;o=255,r=255-90*e,n=255-255*e}else o=255,r=165-(t-.5)/.5*165,n=0;return`rgb(${o}, ${r}, ${n})`}function drawRect(e,t,o,r,n,a){e.save(),e.beginPath();const l=Math.round(t)+.5,s=Math.round(o)+.5,d=Math.round(r),c=Math.round(n);e.roundRect(l,s,d,c,3),e.globalAlpha=1,e.fillStyle=damageColor(a),e.fill(),e.restore()}function updateHitpoints(e){const t=document.getElementById("hitviz");if(!t)return;const o=t.getContext("2d"),r={};for(let t=0;t<HITPOINT_ORDER.length;t++)r[HITPOINT_ORDER[t]]=norm01(e?.[t]??0);const n=t.width,a=t.height,l=n/2,s=l-28,d=l-12,c=l-45,i=c,h=c-8-32,u=c+90+8,m=h,g=u,f=c+8,p=Math.round(122*.26),y=Math.round(41.48),R=134-p-y-12,T=85+p+6,S=T+R+6,H=Math.round(56*.68),x=Math.round(28),I=l-H/2,b=15+Math.round((40-x)/2)+2,M=Math.floor(41),P=Math.max(0,a-265-8-.5*LINE_WIDTH),E=Math.floor(.65*P),w=c,q=c+M+8,A=Math.floor(31),C=f,$=f+A+12;o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,n,a),drawRect(o,c,77,90,150,0),drawRect(o,f,85,74,p,r.hitchest),drawRect(o,C,T,A,R,r.hitdiaphragm),drawRect(o,$,T,A,R,r.hitdiaphragm),drawRect(o,f,S,74,y,r.hitabdomen),drawRect(o,h,77,32,112,r.hitarms),drawRect(o,u,77,32,112,r.hitarms),drawRect(o,m,195,32,32,r.hithands),drawRect(o,g,195,32,32,r.hithands),drawRect(o,d,61,24,10,r.hitneck),drawRect(o,s,15,56,40,r.hithead),drawRect(o,I,b,H,x,r.hitface),drawRect(o,i,233,90,26,r.hitpelvis),drawRect(o,w,265,M,E,r.hitlegs),drawRect(o,q,265,M,E,r.hitlegs)}const track=document.getElementById("actionsTrack"),actions=Array.from(track.querySelectorAll(".action")),HOLD_TIME_MS=1e3;let selectedIndex=0,holdRaf=null,holdStartTs=0,holdProgress=0,isHolding=!1;function applySelection(){actions.forEach((e,t)=>{e.classList.toggle("is-selected",t===selectedIndex),t!==selectedIndex&&e.style.removeProperty("--hold-progress")})}function stepHold(e){holdStartTs||(holdStartTs=e);const t=e-holdStartTs;holdProgress=Math.min(1,t/1e3);const o=actions[selectedIndex];o&&o.style.setProperty("--hold-progress",holdProgress.toFixed(4)),isHolding&&holdProgress<1?holdRaf=requestAnimationFrame(stepHold):(holdRaf=null,isHolding=!1,A3API.SendAlert(`${o.textContent}`))}function startHold(){if(isHolding)return;isHolding=!0,holdStartTs=0,holdProgress=0;const e=actions[selectedIndex];e&&e.style.setProperty("--hold-progress","0"),holdRaf=requestAnimationFrame(stepHold)}function cancelHold(){if(!isHolding&&null==holdRaf)return;isHolding=!1,null!=holdRaf&&(cancelAnimationFrame(holdRaf),holdRaf=null),holdStartTs=0,holdProgress=0;const e=actions[selectedIndex];e&&e.style.removeProperty("--hold-progress")}function updateSelectedItem(e){const t=Math.max(0,Math.min(actions.length-1,0|e));t!==selectedIndex&&(cancelHold(),selectedIndex=t,applySelection())}applySelection(),actions.forEach(e=>{e.dataset.label=e.textContent.trim()})</script><script>function atobr(t){const e=Uint8Array.from(atob(t),t=>t.charCodeAt(0));return new TextDecoder("utf-8").decode(e)}</script></body></html>