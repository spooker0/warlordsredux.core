<!DOCTYPE html><html lang="en"><head><style>.loading-overlay,body{text-shadow:-1px -1px 0#000,1px -1px 0#000,-1px 1px 0#000,1px 1px 0#000}body{font-family:Consolas,monospace;user-select:none;margin:0;padding:0}.loading-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;color:#fff;font-weight:700;font-size:72pt;background:rgba(0,0,0,.15)}.empty-state{position:absolute;top:50vh;left:50vw;transform:translate(-50%,-50%);color:#fff;font-size:36pt;text-align:center;opacity:0}.vehicle-menu{width:100vw;height:100vh;background-color:rgba(0,0,0,.3);margin:0;padding:0;overflow-y:auto;position:relative;opacity:0;scrollbar-color:#444 #2a2a2a;scrollbar-width:thin;color:#fff;font-size:11pt}.vehicle-wrap{display:inline-block;width:240px;margin:10px;vertical-align:top}.vehicle{position:relative;width:240px;height:100px;background-image:var(--bg,none);background-color:rgba(0,0,0,.4);background-blend-mode:overlay;background-size:auto 80px;background-repeat:no-repeat;background-position:center center;overflow:hidden;margin:0;border:1px solid #fff;border-bottom:none}.vehicle-name{position:absolute;top:10px;left:10px;right:10px;font-weight:700;z-index:1;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.vehicle-bar{display:grid;grid-template-columns:repeat(3,1fr);grid-auto-rows:40px;width:240px;margin:0;padding:0;background-color:#222;border:1px solid #fff}.vehicle-bar .button-spacer,.vehicle-bar button{width:100%;height:100%;box-sizing:border-box;margin:0;padding:0;overflow:hidden}.vehicle-bar button{border:1px solid #ccc;color:#fff;font-size:9pt;cursor:pointer;text-align:center;font-weight:bolder}.lock-button,.remove-button,.unlock-button{border-top:none!important}.kick-button,.lock-button,.remove-button{background-color:#900}.kick-button:hover,.lock-button:hover,.remove-button:hover{background-color:#f99}.rearm-button,.refuel-button,.repair-button,.unlock-button{background-color:#090}.rearm-button:hover,.refuel-button:hover,.repair-button:hover,.unlock-button:hover{background-color:#9f9}.connect-button{background-color:#009}.connect-button:hover{background-color:#99f}.close-button{position:absolute;top:10px;right:10px;background-color:rgba(0,0,0,.8);width:50px;height:50px;font-size:50px;line-height:50px;padding:0;margin:0;color:#fff;display:flex;align-items:center;justify-content:center;border-radius:3px}.close-button:hover{background-color:rgba(255,255,255,.8);color:#333}</style></head><body><div class="loading-overlay" id="loading-overlay">LOADING</div><div class="vehicle-menu"></div><div class="empty-state">No vehicles belonging to player found. Buy vehicles using the buy menu.</div><div class="close-button">&times;</div><script>function hideLoadingOverlay(){document.getElementById("loading-overlay").style.display="none",document.querySelector(".empty-state").style.opacity="1.0",document.querySelector(".vehicle-menu").style.opacity="1.0"}function getTexture(e,t=256){return e?document.imageCache[e]?Promise.resolve(document.imageCache[e]):A3API.RequestTexture(e,t).then(t=>document.imageCache[e]=t).catch(()=>null):Promise.resolve(null)}document.imageCache=document.imageCache||{};const OPTION_META={remove:{text:"REMOVE",cls:"remove-button"},lock:{text:"LOCK",cls:"lock-button"},unlock:{text:"UNLOCK",cls:"unlock-button"},kick:{text:"KICK ALL",cls:"kick-button"},"connect-driver":{text:"CONTROL DRIVER",cls:"connect-button"},"connect-gunner":{text:"CONTROL GUNNER",cls:"connect-button"},"set-auto":{text:"TOGGLE AUTO",cls:"connect-button"},rearm:{text:"REARM",cls:"rearm-button"},repair:{text:"REPAIR",cls:"repair-button"},refuel:{text:"REFUEL",cls:"refuel-button"}};function makeButtonBar(e,t=[]){const n=document.createElement("div");n.className="vehicle-bar";const c=new Set(t);return[["remove","lock","unlock"],["rearm","repair","refuel"],["set-auto","connect-driver","connect-gunner"],["kick",null,null]].forEach(t=>{t.forEach((o,r)=>{if(o&&OPTION_META[o]&&c.has(o)){const c=OPTION_META[o],l=document.createElement("button");l.className=c.cls,l.textContent=c.text,l.addEventListener("mousedown",()=>{A3API.SendAlert(`["${e}", "${o}"]`)}),0===r?l.style.borderLeft="none":r===t.length-1&&(l.style.borderRight="none"),n.appendChild(l)}else{const e=document.createElement("div");e.className="button-spacer",n.appendChild(e)}})}),n}function updateData(e){let t=[];try{t=JSON.parse(e||"[]")}catch{t=[]}const n=document.querySelector(".vehicle-menu");if(!n)return;if(!t||!t.length)return n.querySelectorAll(".vehicle-wrap").forEach(e=>e.remove()),document.querySelector(".empty-state").style.display="block",void hideLoadingOverlay();{const e=document.querySelector(".empty-state");e&&(e.style.display="none")}const c=new Set;t.forEach(e=>{const[t,o,r=[],l]=e,[a,s,u,i]=o,d=String(t);c.add(d);let m,h,v,y=n.querySelector(`.vehicle-wrap[data-vehicle-id="${d}"]`);y?(m=y.querySelector(".vehicle"),h=m.querySelector(".vehicle-name"),v=y.querySelector(".vehicle-bar")):(y=document.createElement("div"),y.className="vehicle-wrap",y.dataset.vehicleId=d,m=document.createElement("div"),m.className="vehicle",m.dataset.vehicleId=d,h=document.createElement("div"),h.className="vehicle-name",m.appendChild(h),v=makeButtonBar(t,r),y.appendChild(m),y.appendChild(v),n.appendChild(y));const p=`${a}<br/>${s}<br/>${u}<br/>${i}`;h.innerHTML!==p&&(h.innerHTML=p);const E=l||"";(y.dataset.iconPath||"")!==E&&(y.dataset.iconPath=E,E?getTexture(E,128).then(e=>{e&&m.isConnected&&m.style.setProperty("--bg",`url("${e}")`)}):m.style.removeProperty("--bg"));const b=r.join("|");if(v.dataset.sig!==b){const e=makeButtonBar(t,r);e.dataset.sig=b,v.replaceWith(e)}}),n.querySelectorAll(".vehicle-wrap").forEach(e=>{const t=e.dataset.vehicleId;c.has(t)||e.remove()}),hideLoadingOverlay()}const closeButton=document.querySelector(".close-button");closeButton.addEventListener("mousedown",function(){A3API.SendAlert("exit")})</script><script>function atobr(o){const r=Uint8Array.from(atob(o),o=>o.charCodeAt(0));return new TextDecoder("utf-8").decode(r)}function btoar(o){const r=(new TextEncoder).encode(o),t=Array.from(r,o=>String.fromCharCode(o)).join("");return btoa(t)}</script></body></html>