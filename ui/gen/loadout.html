<!DOCTYPE html><html lang="en"><head><style>:root{--main-bg-color:#344E41;--panel-color:#3A5A40;--border-color:#588157;--lighter-color:#A3B18A;--text-color:#DAD7CD;--warn-color:#ff7777}*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif}body,html{height:100%;text-align:center;user-select:none}img{opacity:0;transition:opacity .2s ease}.menu-title,.panel{color:var(--text-color)}.menu-title{background-color:var(--panel-color);padding:1vh;font-size:2.2vh;font-weight:700;border-bottom:2px solid var(--main-bg-color)}.panel{background-color:var(--main-bg-color);display:inline-block;vertical-align:top;padding:20px;font-size:16px}.scroll-panel{scrollbar-color:var(--border-color) var(--lighter-color);scrollbar-width:thin;border:1px solid var(--border-color);border-radius:5px}.panel.left-panel{width:600px}.panel.right-panel{width:calc(100vw - 600px - 100px);overflow-y:auto}.hide{display:none}.loadout-menu-wrapper{position:relative;display:inline-block;border-radius:10px;border:2px solid var(--border-color);margin-top:4vh;background:var(--main-bg-color)}.loadout-menu{width:100%;font-size:0}.slot,.slot span{position:relative;color:var(--text-color);overflow:hidden}.slot{background-color:var(--panel-color);border:2px solid var(--panel-color);border-radius:5px;font-size:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;height:12vh}.slot:hover{background-color:var(--border-color)}.slot.launcher,.slot.secondary{height:9vh}.slot.ammo{height:7vh;display:flex;align-items:center;justify-content:center;position:relative}.slot img{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;z-index:1;pointer-events:none}.slot span{z-index:2;opacity:.8;font-weight:700;border-radius:6px;padding:4px 12px;margin-top:0;margin-bottom:0;font-size:18pt;text-align:center;width:100%;left:50%;transform:translateX(-50%);display:block;white-space:nowrap}.slot span.primary-name{font-size:7.8vh}.slot span.ammo-name,.slot span.launcher-name,.slot span.secondary-name{font-size:3vh}.selected-slot{background-color:var(--border-color)!important;border:2px solid var(--lighter-color)}.equipment-grid{display:flex;flex-wrap:wrap;gap:15px;justify-content:space-between}.slot{flex:1 1 calc(33.33% - 10px);max-width:calc(33.33% - 10px)}.slot.primary{flex:1 1 100%;max-width:100%}.slot.launcher,.slot.secondary{flex:1 1 calc(50% - 10px);max-width:calc(50% - 10px)}.ammo{margin-top:15px;background:var(--panel-color);height:80px}.primary{grid-column:1/span 6}.secondary{grid-column:1/span 3}.launcher{grid-column:4/span 3}.vest{grid-column:1/span 2}.uniform{grid-column:3/span 2}.helmet{grid-column:5/span 2}.weapon-list{list-style:none;padding:0;margin:0;height:50vh;overflow-y:auto}.outfit-list,.panel-launcher .weapon-list{height:calc(80vh + 15px)}.outfit-list{margin:0}.ammo-list,.backpack-list,.item-list,.outfit-list{list-style:none;padding:0;overflow-y:auto}.backpack-list{margin:0;height:30vh}.ammo-list,.item-list{margin-top:15px;height:50vh}.ammo-row,.backpack-row,.bipod-row,.item-row,.muzzle-row,.optic-row,.outfit-row,.weapon-row{border:1px solid var(--border-color);padding:10px;text-align:left}.bipod-row,.muzzle-row,.optic-row{font-size:10pt}.selected-backpack,.selected-bipod,.selected-muzzle,.selected-optic,.selected-outfit,.selected-weapon{background-color:var(--border-color);border:1px solid var(--text-color)}.backpack-list li,.outfit-list li,.weapon-list li{height:60px;line-height:40px}.ammo-icon,.backpack-icon,.item-icon,.outfit-icon,.weapon-icon{height:40px;margin-right:30px;vertical-align:middle}.bipod-icon,.muzzle-icon,.optic-icon{height:30px;margin-right:20px;vertical-align:middle}.bipod-list,.muzzle-list,.optic-list{width:33%;list-style:none;padding:0;margin:0;height:30vh;overflow-y:auto}.close-button{position:absolute;top:.8vh;right:1vh;background-color:var(--border-color);width:3.5vh;height:3.5vh;font-size:3vh;color:var(--text-color);display:flex;align-items:center;justify-content:center;border-radius:3px}.close-button:hover{background-color:var(--lighter-color)}.row-container{display:flex;justify-content:space-between;margin-top:15px}.quantity-container{display:flex;align-items:center;margin-left:auto}.quantity-minus,.quantity-plus{background-color:var(--panel-color);color:var(--lighter-color);border:0;padding:5px 10px;cursor:pointer;font-size:16px}.quantity-display{width:40px;text-align:center;font-size:16px;color:var(--text-color)}.ammo-row,.item-row{display:flex;justify-content:space-between;align-items:center}.ammo-container{display:flex;flex-direction:row}.ammo-list,.item-list{width:50%}.slot.ammo{flex:1 1 100%;max-width:100%}.ammo-icon-container{height:100%;width:100%;position:absolute;top:0;left:0;z-index:1}.ammo-icon-container img{position:absolute;height:100%;object-fit:contain;margin:0;padding:0;width:25%!important}.ammo-icon-container img:first-child{top:0}.ammo-icon-container img:nth-child(2),.ammo-icon-container img:nth-child(3){top:0}.ammo-icon-container img:last-child{top:0}.ammo-icon-container img:first-child{left:0!important;right:auto!important;transform:none!important}.ammo-icon-container img:nth-child(2),.ammo-icon-container img:nth-child(3){left:25%!important;right:auto!important;transform:none!important}.ammo-icon-container img:nth-child(3){left:50%!important}.ammo-icon-container img:last-child{left:auto!important;right:0!important;transform:none!important}.quantity-minus:hover,.quantity-plus:hover{background-color:var(--text-color)}.item-in-use{background-color:var(--border-color);border-color:var(--border-color)}.ammo-flash{background-color:var(--warn-color);border-color:var(--warn-color)}.locked{color:var(--warn-color)}.loadouts-title{margin-top:2vh;margin-bottom:1vh}.loadouts-row{display:flex;justify-content:space-between;gap:1vh;height:8vh;margin-top:15px}.loadout{flex:1;max-width:8vh;height:100%;background-color:var(--panel-color);border:2px solid var(--panel-color);border-radius:5px;color:var(--text-color);font-size:20px;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center}.selected-loadout{background-color:var(--border-color)!important;border:2px solid var(--lighter-color)}.copy-current:hover,.loadout:hover,.reset-all:hover{background-color:var(--border-color)}.loadouts-options-row{display:flex;justify-content:space-between;margin-top:15px;gap:15px}.copy-current,.reset-all{flex:1;height:50px;background-color:var(--panel-color);border:2px solid var(--panel-color);border-radius:5px;color:var(--text-color);font-size:16px;display:flex;align-items:center;justify-content:center;cursor:pointer}.fps-display{position:fixed;top:10px;left:10px;background-color:#000;color:#fff;padding:5px 10px;border-radius:5px;font-size:14px;z-index:1000}</style></head><body><div class="fps-display"></div><div class="loadout-menu-wrapper"><div class="menu-title">Loadout</div><div class="loadout-menu"><div class="panel left-panel"><div class="equipment-grid"><div class="slot primary selected-slot"><img class="primary-icon" src=""/> <span class="primary-name">PRIMARY</span></div><div class="slot secondary"><img class="secondary-icon" src=""/> <span class="secondary-name">HANDGUN</span></div><div class="slot launcher"><img class="launcher-icon" src=""/> <span class="launcher-name">LAUNCHER</span></div><div class="slot vest"><img class="vest-icon" src=""/> <span class="vest-name">VEST</span></div><div class="slot uniform"><img class="uniform-icon" src=""/> <span class="uniform-name">UNIFORM</span></div><div class="slot helmet"><img class="helmet-icon" src=""/> <span class="helmet-name">HELMET</span></div></div><div class="slot ammo"><div class="ammo-icon-container"><img class="ammo-icon backpack-icon" src=""/> <img class="ammo-icon bullets-icon" src=""/> <img class="ammo-icon grenades-icon" src=""/> <img class="ammo-icon fak-icon" src=""/></div><span class="ammo-name">AMMO</span></div><h1 class="loadouts-title">Loadouts</h1><div class="loadouts-row"><div class="loadout loadout-1 selected-loadout">1</div><div class="loadout loadout-2">2</div><div class="loadout loadout-3">3</div><div class="loadout loadout-4">4</div><div class="loadout loadout-5">5</div></div><div class="loadouts-row"><div class="loadout loadout-6">6</div><div class="loadout loadout-7">7</div><div class="loadout loadout-8">8</div><div class="loadout loadout-9">9</div><div class="loadout loadout-10">10</div></div><div class="loadouts-options-row"><div class="reset-all">RESET ALL</div><div class="copy-current">COPY CURRENT</div></div></div><div class="panel right-panel panel-primary"><ul class="scroll-panel weapon-list"></ul><div class="row-container"><ul class="scroll-panel optic-list"></ul><ul class="scroll-panel muzzle-list"></ul><ul class="scroll-panel bipod-list"></ul></div></div><div class="panel right-panel hide panel-secondary"><ul class="scroll-panel weapon-list"></ul><div class="row-container"><ul class="scroll-panel optic-list"></ul><ul class="scroll-panel muzzle-list"></ul><ul class="scroll-panel bipod-list"></ul></div></div><div class="panel right-panel hide panel-launcher"><ul class="scroll-panel weapon-list"></ul></div><div class="panel right-panel hide panel-vest"><ul class="scroll-panel outfit-list"></ul></div><div class="panel right-panel hide panel-uniform"><ul class="scroll-panel outfit-list"></ul></div><div class="panel right-panel hide panel-helmet"><ul class="scroll-panel outfit-list"></ul></div><div class="panel right-panel hide panel-ammo"><ul class="scroll-panel backpack-list"></ul><div class="ammo-container"><ul class="scroll-panel ammo-list"></ul><ul class="scroll-panel item-list"></ul></div></div></div><div class="close-button">&times;</div></div><script>function scrollPanelIntoView(e){[".selected-weapon",".selected-optic",".selected-muzzle",".selected-bipod",".selected-outfit",".selected-backpack"].forEach(t=>{const o=e.querySelector(t);if(o){const e=o.closest(".scroll-panel");if(e){const t=e.getBoundingClientRect(),a=o.getBoundingClientRect(),n=a.top-t.top+e.scrollTop-t.height/2+a.height/2;e.scrollTo({top:n,behavior:"instant"})}}})}function nextPowerOfTwo(e){return e<1?1:Math.pow(2,Math.ceil(Math.log2(e)))}document.playerLevel=0,document.playerScore=0,document.playerNextLevelScore=0,document.imageCache={},document.addEventListener("wheel",function(e){const t=document.elementFromPoint(e.clientX,e.clientY);t&&t.closest(".scroll-panel")&&(t.closest(".scroll-panel").scrollTop+=e.deltaY,e.preventDefault())},{passive:!1}),document.querySelector(".close-button").addEventListener("mousedown",function(){A3API.SendAlert("exit")}),document.ammoFlash=!1,setInterval(()=>{if(document.ammoAttentionNeeded){const e=document.querySelector(".slot.ammo");e&&document.ammoFlash?e.classList.add("ammo-flash"):e.classList.remove("ammo-flash")}else{const e=document.querySelector(".slot.ammo");e&&e.classList.remove("ammo-flash")}document.ammoFlash=!document.ammoFlash},200),document.querySelectorAll(".slot").forEach(e=>{e.addEventListener("mousedown",function(){document.querySelectorAll(".slot").forEach(e=>e.classList.remove("selected-slot")),this.classList.add("selected-slot"),document.querySelectorAll(".right-panel").forEach(e=>{e.classList.add("hide")});const e=this.classList[1],t=document.querySelector(`.panel-${e}`);t.classList.remove("hide"),"ammo"===e&&(document.ammoAttentionNeeded=!1,document.querySelectorAll(".ammo-list li").forEach(e=>{const t=e.querySelector(".quantity-display");0==(parseInt(t.textContent,10)||0)?e.classList.remove("item-in-use"):e.classList.add("item-in-use")})),scrollPanelIntoView(t)})}),document.querySelectorAll(".loadout").forEach(e=>{e.addEventListener("mousedown",function(){document.querySelectorAll(".loadout").forEach(e=>e.classList.remove("selected-loadout")),this.classList.add("selected-loadout");const t=parseInt(e.textContent.trim(),10)-1;A3API.SendAlert("l"+t)})}),document.querySelector(".reset-all").addEventListener("mousedown",function(){A3API.SendAlert("r")}),document.querySelector(".copy-current").addEventListener("mousedown",function(){A3API.SendAlert("c")});const imageObserver=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;imageObserver.unobserve(t);const o=t.dataset.imageUrl,a=nextPowerOfTwo(Math.max(t.clientWidth,t.clientHeight));if(document.imageCache[o]&&document.imageCache[o][a])return t.src=document.imageCache[o][a],void(t.style.opacity=1);A3API.RequestTexture(o,a).then(e=>{t.src=e,t.style.opacity=1,document.imageCache[o]||(document.imageCache[o]={}),document.imageCache[o][a]=e})}})},{root:null,rootMargin:"0px",threshold:.1});function populateImage(e,t){e.dataset.imageUrl=t,imageObserver.observe(e)}function ammoChanged(){const e=document.querySelectorAll(".ammo-list li"),t=[];e.forEach(e=>{const o=e.dataset.ammoId,a=parseFloat(e.dataset.ammoMass)||0,n=e.querySelector(".quantity-display"),c=parseInt(n.textContent,10)||0;0!=c?(e.classList.add("item-in-use"),t.push([o,c,a])):e.classList.remove("item-in-use")}),document.querySelectorAll(".item-list li").forEach(e=>{const o=e.dataset.itemId,a=parseFloat(e.dataset.itemMass)||0,n=e.querySelector(".quantity-display"),c=parseInt(n.textContent,10)||0;0!=c?(e.classList.add("item-in-use"),t.push([o,c,a])):e.classList.remove("item-in-use")});const o=document.weaponData||[],a=document.magazineData||[];document.playerLoadout[0][4]=[],document.playerLoadout[0][5]=[],document.playerLoadout[1][4]=[],document.playerLoadout[2][4]=[];const n=document.playerLoadout[0][0],c=o.find(e=>e[0]===n),l=c?c[8]:[];for(let e=0;e<t.length;e++){const o=t[e],[n]=o,c=a.find(e=>e[0]===n);if(n&&c&&l.includes(n)){document.playerLoadout[0][4]=[n,c[4]],t[e][1]--;break}}const s=c?c[9]:[];for(let e=0;e<t.length;e++){const o=t[e],[n]=o,c=a.find(e=>e[0]===n);if(n&&c&&s.includes(n)){document.playerLoadout[0][5]=[n,c[4]],t[e][1]--;break}}const r=document.playerLoadout[1][0],d=o.find(e=>e[0]===r),i=d?d[8]:[];for(let e=0;e<t.length;e++){const o=t[e],[n]=o,c=a.find(e=>e[0]===n);if(n&&c&&i.includes(n)){document.playerLoadout[1][4]=[n,c[4]],t[e][1]--;break}}const u=document.playerLoadout[2][0],m=o.find(e=>e[0]===u),p=m?m[8]:[];for(let e=0;e<t.length;e++){const o=t[e],[n]=o,c=a.find(e=>e[0]===n);if(n&&c&&p.includes(n)){document.playerLoadout[2][4]=[n,c[4]],t[e][1]--;break}}const y=document.playerLoadout[3][0],f=o.find(e=>e[0]===y);let h=f?f[5]:0;const L=document.playerLoadout[4][0],g=o.find(e=>e[0]===L);let C=g?g[5]:0;const S=document.playerLoadout[5][0],w=o.find(e=>e[0]===S);let q=w?w[5]:0;const k={},b={},A={};for(;t.length>0;){let[e,o,a]=t.shift();for(;o>0;)h>=a?(h-=a,k[e]=(k[e]||0)+1):C>=a?(C-=a,b[e]=(b[e]||0)+1):q>=a&&S&&(q-=a,A[e]=(A[e]||0)+1),o--}const I=[];for(const e in k){const t=a.find(t=>t[0]===e);if(1===document.itemList[e])I.push([e,k[e],1]);else if(t){const o=t[4];I.push([e,k[e],o])}else I.push([e,k[e]])}const E=[];for(const e in b){const t=a.find(t=>t[0]===e);if(1===document.itemList[e])E.push([e,b[e],1]);else if(t){const o=t[4];E.push([e,b[e],o])}else E.push([e,b[e]])}const _=[];for(const e in A){const t=a.find(t=>t[0]===e);if(1===document.itemList[e])_.push([e,A[e],1]);else if(t){const o=t[4];_.push([e,A[e],o])}else _.push([e,A[e]])}document.playerLoadout[3][1]=I,document.playerLoadout[4][1]=E,document.playerLoadout[5][0]&&(document.playerLoadout[5][1]=_),selectionChanged()}function getAllMagazinesInLoadout(){const e={},t=document.playerLoadout[3][1];t&&t.forEach(t=>{const o=t[0];e[o]=(e[o]||0)+t[1]});const o=document.playerLoadout[4][1];o&&o.forEach(t=>{const o=t[0];e[o]=(e[o]||0)+t[1]});const a=document.playerLoadout[5][1];a&&a.forEach(t=>{const o=t[0];e[o]=(e[o]||0)+t[1]});const n=document.playerLoadout[0][4];if(n){const t=n[0];e[t]=(e[t]||0)+1}const c=document.playerLoadout[0][5];if(c){const t=c[0];e[t]=(e[t]||0)+1}const l=document.playerLoadout[1][4];if(l){const t=l[0];e[t]=(e[t]||0)+1}const s=document.playerLoadout[2][4];if(s){const t=s[0];e[t]=(e[t]||0)+1}return e}function weaponChanged(){if(!document.playerLoadout)return;const e=document.weaponData||[],t=document.magazineData||[],o=[],a=document.playerLoadout[0][0],n=document.playerLoadout[1][0],c=document.playerLoadout[2][0];e.forEach(e=>{[a,n,c].includes(e[0])&&(o.push(...e[8]),o.push(...e[9]))});const l=e.find(e=>e[0]===a);l&&(l[8].includes(document.playerLoadout[0][4][0])||(document.playerLoadout[0][4]=[]),l[9].includes(document.playerLoadout[0][5][0])||(document.playerLoadout[0][5]=[]));const s=e.find(e=>e[0]===n);s&&(s[8].includes(document.playerLoadout[1][4][0])||(document.playerLoadout[1][4]=[]));const r=e.find(e=>e[0]===c);r&&(r[8].includes(document.playerLoadout[2][4][0])||(document.playerLoadout[2][4]=[])),selectionChanged();const d=new Set;document.querySelectorAll(".ammo-list li").forEach(e=>{d.add(e.dataset.ammoId)});const i=new Set(o);if(d.size===i.size&&[...d].every(e=>i.has(e)))return;document.ammoAttentionNeeded=!0;const u=document.querySelector(".ammo-list");u.innerHTML="";const m=getAllMagazinesInLoadout();o.forEach(e=>{const o=t.find(t=>t[0]===e),a=document.createElement("li");a.className="ammo-row",a.dataset.ammoId=e,a.dataset.ammoMass=o[3];const n=document.createElement("img");n.className="ammo-icon",a.appendChild(n);const c=document.createElement("span");c.textContent=o[1],a.appendChild(c);const l=document.createElement("div");l.className="quantity-container";const s=document.createElement("button");s.textContent="-",s.className="quantity-minus",s.addEventListener("mousedown",()=>{const e=parseInt(r.textContent,10);e>0&&(r.textContent=e-1,ammoChanged())});const r=document.createElement("span");r.textContent=(m[e]||0)+"",r.className="quantity-display";const d=document.createElement("button");d.textContent="+",d.className="quantity-plus",d.addEventListener("mousedown",()=>{const e=parseInt(r.textContent,10);r.textContent=e+1,ammoChanged()}),l.appendChild(s),l.appendChild(r),l.appendChild(d),a.appendChild(l),u.appendChild(a),populateImage(n,o[2])})}function selectionChanged(){if(!document.readyToSend)return;if(!document.playerLoadout)return;const e=JSON.stringify(document.playerLoadout);A3API.SendAlert(e)}function handleAttachmentSelection(){if(!document.playerLoadout)return;const e=document.querySelector(".panel-primary"),t=document.querySelector(".panel-secondary"),o=e.querySelector(".selected-optic"),a=o?o.dataset.opticId:"",n=e.querySelector(".selected-muzzle"),c=n?n.dataset.muzzleId:"",l=e.querySelector(".selected-bipod"),s=l?l.dataset.bipodId:"";document.playerLoadout[0][3]=a,document.playerLoadout[0][1]=c,document.playerLoadout[0][2]=s;const r=t.querySelector(".selected-optic"),d=r?r.dataset.opticId:"",i=t.querySelector(".selected-muzzle"),u=i?i.dataset.muzzleId:"",m=t.querySelector(".selected-bipod"),p=m?m.dataset.bipodId:"";document.playerLoadout[2][3]=d,document.playerLoadout[2][1]=u,document.playerLoadout[2][2]=p}function createOpticRow(e,t){const o=document.createElement("li");o.className="optic-row",o.dataset.opticId=e[0],o.dataset.opticName=e[1],o.innerHTML=`<img class="optic-icon" />${e[1]}`,t.querySelector(".optic-list").appendChild(o),populateImage(o.querySelector(".optic-icon"),e[2]),o.addEventListener("mousedown",function(){document.querySelectorAll(".optic-row").forEach(e=>e.classList.remove("selected-optic")),this.classList.add("selected-optic"),handleAttachmentSelection(),selectionChanged()})}function createMuzzleRow(e,t){const o=document.createElement("li");o.className="muzzle-row",o.dataset.muzzleId=e[0],o.dataset.muzzleName=e[1],o.innerHTML=`<img class="muzzle-icon" />${e[1]}`,t.querySelector(".muzzle-list").appendChild(o),populateImage(o.querySelector(".muzzle-icon"),e[2]),o.addEventListener("mousedown",function(){document.querySelectorAll(".muzzle-row").forEach(e=>e.classList.remove("selected-muzzle")),this.classList.add("selected-muzzle"),t.classList.contains("panel-primary")?document.playerLoadout[0][1]=e[0]:t.classList.contains("panel-secondary")?document.playerLoadout[2][1]=e[0]:t.classList.contains("panel-launcher")&&(document.playerLoadout[1][1]=e[0]),selectionChanged()})}function createBipodRow(e,t){const o=document.createElement("li");o.className="bipod-row",o.dataset.bipodId=e[0],o.dataset.bipodName=e[1],o.innerHTML=`<img class="bipod-icon" />${e[1]}`,t.querySelector(".bipod-list").appendChild(o),populateImage(o.querySelector(".bipod-icon"),e[2]),o.addEventListener("mousedown",function(){document.querySelectorAll(".bipod-row").forEach(e=>e.classList.remove("selected-bipod")),this.classList.add("selected-bipod"),t.classList.contains("panel-primary")?document.playerLoadout[0][6]=e[0]:t.classList.contains("panel-secondary")?document.playerLoadout[2][6]=e[0]:t.classList.contains("panel-launcher")&&(document.playerLoadout[1][6]=e[0]),selectionChanged()})}function handleWeaponRowClick(e,t,o){if(o.querySelectorAll(".weapon-row").forEach(e=>e.classList.remove("selected-weapon")),e.classList.add("selected-weapon"),o.classList.contains("panel-primary")){const e=document.querySelector(".primary-icon");t&&""!==t[3]?(e.style.display="block",populateImage(e,t[3])):e.style.display="none"}else if(o.classList.contains("panel-secondary")){const e=document.querySelector(".secondary-icon");t&&""!==t[3]?(e.style.display="block",populateImage(e,t[3])):e.style.display="none"}else if(o.classList.contains("panel-launcher")){const e=document.querySelector(".launcher-icon");t&&""!==t[3]?(e.style.display="block",populateImage(e,t[3])):e.style.display="none"}if(t&&!o.classList.contains("panel-launcher")){const e=t[5]||[],a=t[6]||[],n=t[7]||[],c=o.querySelector(".optic-list");c.innerHTML="";const l=o.querySelector(".muzzle-list");l.innerHTML="";const s=o.querySelector(".bipod-list");s.innerHTML="",e.forEach(e=>createOpticRow(e,o)),a.forEach(e=>createMuzzleRow(e,o)),n.forEach(e=>createBipodRow(e,o));const r=Array.from(c.querySelectorAll(".optic-row"));r.sort((e,t)=>{const o=e.dataset.opticName.trim()||"ZZZ",a=t.dataset.opticName.trim()||"ZZZ";return"None"===o?-1:"None"===a?1:o.localeCompare(a)}),r.forEach(e=>c.appendChild(e));const d=Array.from(l.querySelectorAll(".muzzle-row"));d.sort((e,t)=>{const o=e.dataset.muzzleName.trim()||"ZZZ",a=t.dataset.muzzleName.trim()||"ZZZ";return"None"===o?-1:"None"===a?1:o.localeCompare(a)}),d.forEach(e=>l.appendChild(e));const i=Array.from(s.querySelectorAll(".bipod-row"));i.sort((e,t)=>{const o=e.dataset.bipodName.trim()||"ZZZ",a=t.dataset.bipodName.trim()||"ZZZ";return"None"===o?-1:"None"===a?1:o.localeCompare(a)}),i.forEach(e=>s.appendChild(e))}document.playerLoadout&&(o.classList.contains("panel-primary")?changeAttachments(document.playerLoadout[0],t,o):o.classList.contains("panel-secondary")?changeAttachments(document.playerLoadout[2],t,o):o.classList.contains("panel-launcher")&&changeAttachments(document.playerLoadout[1],t,o)),weaponChanged()}function changeAttachments(e,t,o){let a="",n=[],c=[],l=[];t&&t.length>0&&(a=t[0],n=(t[5]||[]).map(e=>e[0]),c=(t[6]||[]).map(e=>e[0]),l=(t[7]||[]).map(e=>e[0])),e[0]=a||"",""===a?(e[1]="",e[3]="",e[6]=""):(c.includes(e[1])||(e[1]="",console.log(e)),n.includes(e[3])||(e[3]=""),l.includes(e[6])||(e[6]="")),selectAttachmentRows(e,o)}function createWeaponRow(e,t){const o=e[0];let a=e[2];const n=e[3],c=document.createElement("li");c.className="weapon-row",c.dataset.weaponId=o,c.dataset.weaponName=a;const l=e[4];l>document.playerLevel?(c.classList.add("locked"),a+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Requires: Level ${l}]`):c.classList.remove("locked"),""===n?c.innerHTML=a:(c.innerHTML=`<img class="weapon-icon" />${a}`,populateImage(c.querySelector(".weapon-icon"),n)),t.querySelector(".weapon-list").appendChild(c),c.addEventListener("mousedown",function(){this.classList.contains("locked")||handleWeaponRowClick(c,e,t)})}function handleOutfitRowClick(e,t,o){o.querySelectorAll(".outfit-row").forEach(e=>e.classList.remove("selected-outfit")),e.classList.add("selected-outfit"),o.classList.contains("panel-vest")?populateImage(document.querySelector(".vest-icon"),t[3]):o.classList.contains("panel-uniform")?populateImage(document.querySelector(".uniform-icon"),t[3]):o.classList.contains("panel-helmet")&&populateImage(document.querySelector(".helmet-icon"),t[3]),document.playerLoadout&&(o.classList.contains("panel-vest")?document.playerLoadout[4][0]=t[0]:o.classList.contains("panel-uniform")?document.playerLoadout[3][0]=t[0]:o.classList.contains("panel-helmet")&&(document.playerLoadout[6]=t[0]),weaponChanged(),ammoChanged(),selectionChanged())}function createOutfitRow(e,t){const o=e[0];let a=e[2];const n=e[3],c=document.createElement("li");c.className="outfit-row",c.dataset.outfitId=o,c.dataset.outfitName=a;const l=e[4];l>document.playerLevel?(c.classList.add("locked"),a+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Requires: Level ${l}]`):c.classList.remove("locked"),c.innerHTML=`<img class="outfit-icon" />${a}`,t.querySelector(".outfit-list").appendChild(c),populateImage(c.querySelector(".outfit-icon"),n),c.addEventListener("mousedown",function(){this.classList.contains("locked")||handleOutfitRowClick(c,e,t)})}function handleBackpackRowClick(e,t,o){o.querySelectorAll(".backpack-row").forEach(e=>e.classList.remove("selected-backpack")),e.classList.add("selected-backpack");const a=document.querySelector(".backpack-icon");if(t&&t.length>3&&""!==t[0]?populateImage(a,t[3]):populateImage(a,"A3\\Weapons_F\\Ammoboxes\\Bags\\data\\ui\\backpack_CA.paa"),document.playerLoadout){if(!t||""===t[0])return document.playerLoadout[5]=[],void selectionChanged();document.playerLoadout[5][0]=t[0],document.playerLoadout[5][1]=[],selectionChanged()}}function createBackpackRow(e,t){const o=e[0];let a=e[2];const n=e[3],c=document.createElement("li");c.className="backpack-row",c.dataset.backpackId=o;const l=e[4];l>document.playerLevel?(c.classList.add("locked"),a+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Requires: Level ${l}]`):c.classList.remove("locked"),""===n?c.innerHTML=a:(c.innerHTML=`<img class="backpack-icon" />${a}`,populateImage(c.querySelector(".backpack-icon"),n)),t.querySelector(".backpack-list").appendChild(c),c.addEventListener("mousedown",function(){this.classList.contains("locked")||handleBackpackRowClick(c,e,t)})}function createItemRow(e,t){const o=getAllMagazinesInLoadout();e[4]&&(document.itemList[e[0]]=1);const a=document.createElement("li");a.className="item-row",a.dataset.itemId=e[0],a.dataset.itemMass=e[3];const n=document.createElement("img");n.className="item-icon",a.appendChild(n);const c=document.createElement("span");c.textContent=e[1],a.appendChild(c);const l=document.createElement("div");l.className="quantity-container";const s=document.createElement("button");s.textContent="-",s.className="quantity-minus",s.addEventListener("mousedown",()=>{const e=parseInt(r.textContent,10);e>0&&(r.textContent=e-1,ammoChanged())});const r=document.createElement("span");r.textContent=(o[e[0]]||0)+"",r.className="quantity-display";const d=document.createElement("button");d.textContent="+",d.className="quantity-plus",d.addEventListener("mousedown",()=>{const e=parseInt(r.textContent,10);r.textContent=e+1,ammoChanged()}),l.appendChild(s),l.appendChild(r),l.appendChild(d),a.appendChild(l),t.appendChild(a),populateImage(n,e[2])}function selectAttachmentRows(e,t){const o=e[1]||"",a=t.querySelector(`.muzzle-row[data-muzzle-id="${o}"]`);a&&a.classList.add("selected-muzzle");const n=e[3]||"",c=t.querySelector(`.optic-row[data-optic-id="${n}"]`);c&&c.classList.add("selected-optic");const l=e[6]||"",s=t.querySelector(`.bipod-row[data-bipod-id="${l}"]`);s&&s.classList.add("selected-bipod")}function selectDefaultForWeapon(e,t,o){const a=o.querySelector(`.weapon-row[data-weapon-id="${t[0]}"]`),n=e.find(e=>e[0]===t[0]);a?(handleWeaponRowClick(a,n,o),selectAttachmentRows(t,o)):handleWeaponRowClick(o.querySelector(".weapon-row"),null,o)}function selectDefaultForOutfit(e,t,o){const a=o.querySelector(`.outfit-row[data-outfit-id="${t}"]`),n=e.find(e=>e[0]===t);a&&handleOutfitRowClick(a,n,o)}function selectDefaultForBackpack(e,t,o){const a=o.querySelector(`.backpack-row[data-backpack-id="${t}"]`),n=e.find(e=>e[0]===t);a?handleBackpackRowClick(a,n,o):handleBackpackRowClick(o.querySelector(".backpack-row"),null,o)}function updateTheme(e){const t=[{backgroundColor:"#344E41",panelColor:"#3A5A40",borderColor:"#588157",lighterColor:"#A3B18A",textColor:"#DAD7CD"},{backgroundColor:"#355482",panelColor:"#35719e",borderColor:"#348dba",lighterColor:"#34a8d5",textColor:"#34c4f0"},{backgroundColor:"#051923",panelColor:"#003554",borderColor:"#006494",lighterColor:"#0582ca",textColor:"#00a6fb"},{backgroundColor:"#880d1e",panelColor:"#dd2d4a",borderColor:"#f26a8d",lighterColor:"#f49cbb",textColor:"#cbeef3"},{backgroundColor:"#1a1a1a",panelColor:"#424242",borderColor:"#686868",lighterColor:"#8f8f8f",textColor:"#b5b5b5"}],o=t[e-1]||t[0],a=document.querySelector(":root");a.style.setProperty("--main-bg-color",o.backgroundColor),a.style.setProperty("--panel-color",o.panelColor),a.style.setProperty("--border-color",o.borderColor),a.style.setProperty("--lighter-color",o.lighterColor),a.style.setProperty("--text-color",o.textColor)}function selectLoadout(e){document.querySelectorAll(".loadout").forEach(e=>{e.classList.remove("selected-loadout")}),document.querySelector(`.loadout-${e+1}`).classList.add("selected-loadout")}function formatNumber(e){return e.toLocaleString()}function updateLoadout(e,t,o,a,n,c,l,s){document.playerLoadout=void 0,document.readyToSend=!1,o=JSON.parse(o)||[],e=JSON.parse(e)||[],a=JSON.parse(a)||[],document.weaponData=o,document.magazineData=a,document.itemList={},document.playerLevel=n,document.playerScore=c,document.playerNextLevelScore=l,document.querySelector(".menu-title").textContent=`Loadout (Level ${n} - Score: ${formatNumber(c)}/${formatNumber(l)})`,selectLoadout(t),updateTheme(s);const r=document.querySelector(".panel-primary"),d=document.querySelector(".panel-secondary"),i=document.querySelector(".panel-launcher"),u=document.querySelector(".panel-vest"),m=document.querySelector(".panel-uniform"),p=document.querySelector(".panel-helmet"),y=document.querySelector(".panel-ammo");r.querySelector(".weapon-list").innerHTML="",d.querySelector(".weapon-list").innerHTML="",i.querySelector(".weapon-list").innerHTML="",u.querySelector(".outfit-list").innerHTML="",m.querySelector(".outfit-list").innerHTML="",p.querySelector(".outfit-list").innerHTML="",createWeaponRow(["","primary","None","",0,0,[],[],[],[],[]],r),createWeaponRow(["","secondary","None","",0,0,[],[],[],[],[]],d),createWeaponRow(["","launcher","None","",0,0,[],[],[],[],[]],i),createBackpackRow(["","backpack","None",""],y),o.forEach((e,t)=>{"primary"===e[1]?createWeaponRow(e,r):"secondary"===e[1]?createWeaponRow(e,d):"launcher"===e[1]?createWeaponRow(e,i):"vest"===e[1]?createOutfitRow(e,u):"uniform"===e[1]?createOutfitRow(e,m):"helmet"===e[1]?createOutfitRow(e,p):"backpack"===e[1]&&createBackpackRow(e,y)}),selectDefaultForWeapon(o,e[0],r),selectDefaultForWeapon(o,e[1],i),selectDefaultForWeapon(o,e[2],d),selectDefaultForOutfit(o,e[4][0],u),selectDefaultForOutfit(o,e[3][0],m),selectDefaultForOutfit(o,e[6],p),selectDefaultForBackpack(o,e[5][0],y),document.querySelectorAll(".weapon-list").forEach(e=>{const t=Array.from(e.querySelectorAll(".weapon-row"));t.sort((e,t)=>{const o=e.dataset.weaponName.trim()||"ZZZ",a=t.dataset.weaponName.trim()||"ZZZ";return"None"===o?-1:"None"===a?1:o.localeCompare(a)}),t.forEach(t=>e.appendChild(t))}),document.querySelectorAll(".outfit-list").forEach(e=>{const t=Array.from(e.querySelectorAll(".outfit-row"));t.sort((e,t)=>{const o=e.dataset.outfitName.trim()||"ZZZ",a=t.dataset.outfitName.trim()||"ZZZ";return"None"===o?-1:"None"===a?1:o.localeCompare(a)}),t.forEach(t=>e.appendChild(t))}),scrollPanelIntoView(r),document.playerLoadout=e;const f=y.querySelector(".item-list");f.innerHTML="",createItemRow(["FirstAidKit","First Aid Kit","A3\\Weapons_F\\Items\\data\\UI\\gear_FirstAidKit_CA.paa",8,!1],f),createItemRow(["HandGrenade","RGO Grenade","A3\\Weapons_F\\Data\\UI\\gear_M67_CA.paa",10,!0],f),createItemRow(["MiniGrenade","RGN Grenade","A3\\Weapons_F\\Data\\UI\\gear_M67_CA.paa",6,!0],f),createItemRow(["SmokeShell","Smoke Grenade (White)","A3\\Weapons_f\\data\\ui\\gear_smokegrenade_white_ca.paa",4,!0],f),createItemRow(["SmokeShellRed","Smoke Grenade (Red)","A3\\Weapons_f\\data\\ui\\gear_smokegrenade_red_ca.paa",4,!0],f),createItemRow(["SmokeShellGreen","Smoke Grenade (Green)","A3\\Weapons_f\\data\\ui\\gear_smokegrenade_green_ca.paa",4,!0],f),createItemRow(["SmokeShellBlue","Smoke Grenade (Blue)","A3\\Weapons_f\\data\\ui\\gear_smokegrenade_blue_ca.paa",4,!0],f),createItemRow(["SmokeShellYellow","Smoke Grenade (Yellow)","A3\\Weapons_f\\data\\ui\\gear_smokegrenade_yellow_ca.paa",4,!0],f),createItemRow(["SmokeShellOrange","Smoke Grenade (Orange)","A3\\Weapons_f\\data\\ui\\gear_smokegrenade_orange_ca.paa",4,!0],f),createItemRow(["SmokeShellPurple","Smoke Grenade (Purple)","A3\\Weapons_f\\data\\ui\\gear_smokegrenade_purple_ca.paa",4,!0],f),createItemRow(["Chemlight_blue","Chemlight (Blue)","A3\\Weapons_f\\Data\\UI\\M_chemlight_blue_CA.paa",2,!0],f),createItemRow(["Chemlight_green","Chemlight (Green)","A3\\Weapons_f\\Data\\UI\\M_chemlight_green_CA.paa",2,!0],f),createItemRow(["Chemlight_red","Chemlight (Red)","A3\\Weapons_f\\Data\\UI\\M_chemlight_red_CA.paa",2,!0],f),createItemRow(["Chemlight_yellow","Chemlight (Yellow)","A3\\Weapons_f\\Data\\UI\\M_chemlight_yellow_CA.paa",2,!0],f);const h=document.querySelector(".ammo-icon-container");populateImage(h.querySelector(".bullets-icon"),"a3\\Weapons_F\\MagazineProxies\\data\\UI\\icon_100Rnd_65x39_caseless_khaki_mag_tracer_CA.paa"),populateImage(h.querySelector(".grenades-icon"),"A3\\Weapons_f\\data\\ui\\gear_M67_CA.paa"),populateImage(h.querySelector(".fak-icon"),"A3\\Weapons_f\\Items\\data\\UI\\gear_FirstAidKit_CA.paa"),handleAttachmentSelection(),weaponChanged(),ammoChanged(),document.readyToSend=!0,selectionChanged(),document.ammoAttentionNeeded=!1}let frameTime=0,frameCount=0,lastLoop=performance.now();const fpsLoop=()=>{const e=performance.now();frameTime+=(e-lastLoop-frameTime)/20,lastLoop=e,frameCount++,requestAnimationFrame(fpsLoop)},fpsOut=document.querySelector(".fps-display");setInterval(()=>{fpsOut.textContent=frameCount>60?`MENU FPS: ${(1e3/frameTime).toFixed(2)}`:"MENU FPS: -"},100),fpsLoop()</script><script>function atobr(o){const r=Uint8Array.from(atob(o),o=>o.charCodeAt(0));return new TextDecoder("utf-8").decode(r)}function btoar(o){const r=(new TextEncoder).encode(o),t=Array.from(r,o=>String.fromCharCode(o)).join("");return btoa(t)}</script></body></html>