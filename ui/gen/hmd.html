<!DOCTYPE html><html lang="en"><head><style>.hmd-wrapper{position:fixed;top:30vh;left:50%;transform:translate(-50%,0);font-family:Consolas,monospace;color:#14cb00;text-shadow:-1px -1px 0#000,1px -1px 0#000,-1px 1px 0#000,1px 1px 0#000;text-align:center;font-size:20px}.hmd-settings-title{margin:20px 0;text-align:center;font-size:22px}.hmd-setting{display:grid;grid-template-columns:1fr 60px 1fr;align-items:center;column-gap:8px;margin:8px 0}.hmd-slider{width:300px;vertical-align:middle;margin:0 6px;appearance:none}.hmd-setting-minus,.hmd-setting-plus{display:inline-block;line-height:1;vertical-align:middle;cursor:pointer}.hmd-slider::-webkit-slider-runnable-track{height:4px;background:#14cb00;border:1px solid #000;border-right:none;border-left:none}.hmd-slider::-webkit-slider-thumb{appearance:none;width:4px;height:16px;background:#14cb00;border:1px solid #000;margin-top:-7px}.selected{color:#e74c3c!important}.selected .hmd-slider::-webkit-slider-runnable-track{background:#e74c3c}.selected .hmd-slider::-webkit-slider-thumb{background:#e74c3c}.hmd-selector{text-align:center}.hmd-setting-name{text-align:left;justify-self:start}</style></head><body><div class="hmd-wrapper"><p class="hmd-settings-title">HMD SETTINGS</p></div><script>const DISTANCE_STEPS=[0,250,500,1e3,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3,19e3,2e4];function clampToRange(e,t,n){return Math.max(t,Math.min(n,e))}function getWrapper(){return document.querySelector(".hmd-wrapper")}function getRows(){return Array.from(getWrapper().querySelectorAll(".hmd-setting"))}function getRowByIndex(e){return getRows()[e]}function getCurrentRow(){return getRowByIndex(document.currentSettingIndex)}function getNum(e,t){return Number(e.dataset[t])}function isDistance(e){return"1"===e.dataset.isDistance}function getSteps(e,t){return DISTANCE_STEPS.filter(n=>n>=e&&n<=t)}function snapToNearest(e,t,n){const a=getSteps(t,n);let s=a[0],r=Math.abs(e-s);for(let t=1;t<a.length;t++){const n=Math.abs(e-a[t]);n<r&&(s=a[t],r=n)}return s}function isProfile(e){return"PROFILE"===(e.dataset.name||"").toUpperCase()}function getNextDistanceValue(e,t,n,a){const s=getSteps(n,a),r=s.indexOf(e);return-1!==r?s[clampToRange(r+t,0,s.length-1)]:s[0]}function updateLabel(e,t){const n=Number(e.dataset.offset||"0");e.querySelector(".hmd-slider").value=t,e.querySelector(".hmd-setting-name").textContent=`${e.dataset.name}: ${t+n}`}function setRowValue(e,t){const n=getNum(e,"min"),a=getNum(e,"max");t=isDistance(e)?snapToNearest(t,n,a):clampToRange(t,n,a),e.dataset.value=t,updateLabel(e,t),A3API.SendAlert(`["${e.dataset.name}", ${t}]`)}function bumpRow(e,t){const n=getNum(e,"min"),a=getNum(e,"max"),s=getNum(e,"value");setRowValue(e,isDistance(e)?getNextDistanceValue(s,t,n,a):clampToRange(s+t,n,a))}function settingPlus(){bumpRow(getCurrentRow(),1)}function settingMinus(){bumpRow(getCurrentRow(),-1)}function setCurrentSetting(e){const t=getRows();document.currentSettingIndex=clampToRange(e,0,t.length-1),t.forEach((e,t)=>{e.querySelector(".hmd-selector").textContent=t===document.currentSettingIndex?"[>]":"[ ]",e.classList.toggle("selected",t===document.currentSettingIndex)})}function currentSettingNext(){const e=getRows();setCurrentSetting((document.currentSettingIndex+1)%e.length);const t=getCurrentRow().dataset.name;A3API.SendAlert(`["${t}"]`)}function currentSettingPrev(){const e=getRows();setCurrentSetting((document.currentSettingIndex-1+e.length)%e.length);const t=getCurrentRow().dataset.name;A3API.SendAlert(`["${t}"]`)}function updateData(e,t){e=JSON.parse(e)||[];const n=getWrapper();n.innerHTML='<p class="hmd-settings-title">HMD SETTINGS</p>',e.forEach(([e,t,a,s,r])=>{let u=Number(t),o=Number(a),c=Number(s),i=0;"PROFILE"===(e||"").toUpperCase()?(u=0,o=4,c=clampToRange(Number.isFinite(c)?c:0,u,o),i=1):c=clampToRange(Number.isFinite(c)?c:u,u,o);const m=document.createElement("div");m.className="hmd-setting",m.dataset.name=e,m.dataset.min=u,m.dataset.max=o,m.dataset.isDistance=r?"1":"0",m.dataset.value=c,m.dataset.offset=i;const g=document.createElement("div");g.innerHTML=`\n      <span class="hmd-setting-minus">&lt;</span>\n      <input type="range" min="${u}" max="${o}" value="${c}" class="hmd-slider">\n      <span class="hmd-setting-plus">&gt;</span>`;const l=document.createElement("span");l.className="hmd-selector",l.textContent="[ ]";const d=document.createElement("span");d.className="hmd-setting-name",d.textContent=`${e}: ${c+i}`,m.append(g,l,d),n.appendChild(m)}),setCurrentSetting(t)}</script><script>function atobr(o){const r=Uint8Array.from(atob(o),o=>o.charCodeAt(0));return new TextDecoder("utf-8").decode(r)}function btoar(o){const r=(new TextEncoder).encode(o),t=Array.from(r,o=>String.fromCharCode(o)).join("");return btoa(t)}</script></body></html>